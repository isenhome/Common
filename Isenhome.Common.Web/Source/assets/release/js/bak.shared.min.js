define("shared/helper/utils", ["jquery", "jquery.sticky"], function (a) {
	var b,
	c = {};
	return c.alert = function (c, d, e) {
		var f = {
			info : "st-info",
			success : "st-success",
			error : "st-error",
			notifiy : "st-notify"
		};
		a.sticky(d || "An unexpected error occured!", {
			autoclose : e !== b ? e : "error" === c || "notifiy" === c || "info" === c ? !1 : 3e3,
			position : "top-center",
			type : f[c]
		})
	},
	c.notification = function () {
		var a = {
			delay : 5e3,
			close : !0,
			icon : "",
			title : "Notification title",
			body : "Notification body"
		},
		b = function () {
			window.webkitNotifications && window.webkitNotifications.requestPermission()
		},
		c = function () {
			return 0 === window.webkitNotifications.checkPermission()
		},
		d = function (b) {
			for (var c in b)
				"undefined" != typeof a[c] && (a[c] = b[c]);
			if (window.webkitNotifications && 0 === window.webkitNotifications.checkPermission()) {
				var d = window.webkitNotifications.createNotification(a.icon, a.title, a.body);
				a.close || (d.ondisplay = function (b) {
					window.setTimeout(function () {
						b.currentTarget.cancel()
					}, parseInt(a.delay, 10))
				}),
				d.show()
			}
		};
		return {
			show : d,
			check : c,
			grant : b
		}
	}
	(),
	c.widgetLoaded = function () {
		this.$element.removeClass("widget-spin")
	},
	c.widgetLoading = function () {
		this.$element.addClass("widget-spin")
	},
	c.window = function (b) {
		b = a.extend(c.window.options, b),
		c.window.instance && c.window.instance.close(),
		c.window.instance = window.open(b.url, b.name, "height=" + b.height + ", width=" + b.width + ", top=" + b.top + ", left=" + b.left + ", toolbar=no, menubar=no, scrollbars=yes, resizable=no,location=no, status=no")
	},
	c.window.options = {
		url : "",
		name : "New Window",
		height : "800",
		width : "600",
		top : "0",
		left : screen.width
	},
	c.window.instance = null,
	c
}), define("shared/helper/ajax", ["compose", "jquery", "troopjs-core/remote/ajax", "troopjs-utils/deferred", "shared/helper/utils"], function (a, b, c, d, e) {
	var f;
	return c.extend({
		"hub/ajax" : a.around(function (a) {
			return function (c, g, h, i) {
				var j = this,
				k = h || d();
				i && i instanceof b && i.prop("disabled", !0);
				try {
					k.fail(function (a) {
						try {
							switch (a.status) {
							case 500:
								e.alert("error", JSON.parse(a.responseText).message);
								break;
							case 404:
								e.alert("error", "请求地址错误!");
								break;
							default:
								e.alert("error")
							}
						} catch (b) {
							e.alert("error"),
							j.publish("error/log", b.message, b.stack, {
								response : a
							})
						}
					}).always(function (a) {
						i && i.prop("disabled", !1),
						a.status === f || a.status || "login required" !== a.message || (e.alert("error", "登录超时,跳转到登录页面..."), window.setTimeout(function () {
								window.location.reload()
							}, 800))
					}),
					a.call(this, c, g, k)
				} catch (l) {
					i && i.prop("disabled", !1),
					j.publish("error/log", l.message, l.stack)
				}
			}
		})
	})
}), define("shared/helper/blurb", ["jquery", "i18n", "config"], function (a, b, c) {
	var d = "/locales/__lng__/__ns__.json",
	e = c.userLang;
	return e || (e = window.localStorage.getItem("lang") || "en"),
	b.init({
		lng : e,
		resGetPath : d,
		fallbackLng : !1,
		useLocalStorage : !1,
		debug : c.debug,
		load : "current",
		customLoad : function (b, c, d, e) {
			a.ajax({
				url : d.resGetPath.replace("__lng__", b).replace("__ns__", c),
				async : !1
			}).done(function (a) {
				e(null, a)
			})
		}
	}), {
		t : function (a) {
			return b.t(a, {
				lng : e
			})
		}
	}
}), define("shared/helper/toggle", ["troopjs-core/component/widget"], function (a) {
	var b = '[data-toggle="view"]',
	c = '[data-action="helper/toggle/show"]',
	d = "hide",
	e = "helper/toggle";
	return a.extend({
		"sig/initialize" : function (a, b) {
			b.resolve()
		},
		"dom/action.click" : $.noop,
		"dom/action/helper/toggle/show.click" : function (a, c) {
			c.preventDefault();
			var f = this,
			g = $(c.target);
			f.publish(e),
			g.addClass(d),
			f.$element.find(b).removeClass(d)
		},
		"hub/helper/toggle" : function () {
			var a = this;
			a.$element.find(b).addClass(d),
			a.$element.find(c).removeClass(d)
		}
	})
}), define("shared/helper/translation", ["troopjs-core/component/widget", "shared/helper/blurb", "troopjs-utils/deferred"], function (a, b, c) {
	var d = "data-i18n";
	return a.extend(function (a, b, c) {
		this.attr = c
	}, {
		"sig/initialize" : function (a, e) {
			var f = this,
			g = f.$element.attr(d);
			e = e || c(),
			c(function (a) {
				f.attr ? f.$element.attr(f.attr, b.t(g)) : f.$element.text(b.t(g)),
				a.resolve()
			}).then(e.resolve, e.reject, e.notify)
		}
	})
}), define("shared/helper/validate", ["jquery", "shared/helper/blurb", "troopjs-core/pubsub/hub", "troopjs-utils/deferred", "jquery.validate", "jquery.validate.extend"], function (a, b, c, d) {
	var e = /^(http:\/\/)?\w+\.linkedin\.com\/((in\/\w*)|(pub\/((((.*-)+\w*)|.*))?\/\w{1,3}\/\w{1,3}\/\w{1,3}))$/i,
	f = /.*<(.*)>/i,
	g = /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;
	a.validator.setDefaults({
		ignore : [],
		focusInvalid : !1,
		invalidHandler : function (b, c) {
			var d = a(c.errorList[0].element),
			e = d.offsetParent();
			c.numberOfInvalids() && ("HTML" === e.prop("tagName") || "BODY" === e.prop("tagName") ? e.animate({
					scrollTop : d.offset().top - 45
				}, 1e3) : e.animate({
					scrollTop : d.position().top
				}, 1e3))
		}
	});
	var h = {
		REQUIRED : b.t("This field is required"),
		EMAIL : b.t("Please enter a valid email address"),
		EMAILS : b.t("There are a valid email address"),
		URL : b.t("Please enter a valid URL"),
		DATE : b.t("Please enter a valid date"),
		NUMBER : b.t("Please enter a valid number"),
		DIGITS : b.t("Please enter only digits"),
		MAXLENGTH : b.t("Please enter no more than {0} characters"),
		MINLENGTH : b.t("Please enter at least {0} characters"),
		REQUIRE_FROM_GROUP : b.t("Please fill at least 1 of these fields"),
		IPV4 : b.t("Please enter a valid IP v4 address"),
		MAX : b.t("Please enter a value less than or equal to {0}"),
		MIN : b.t("Please enter a value greater than or equal to {0}"),
		LINKEDIN_ERROR : b.t("Linkedin error")
	};
	a.extend(a.validator.messages, {
		ipv4 : h.IPV4,
		required : h.REQUIRED,
		remote : "Please fix this field.",
		email : h.EMAIL,
		emails : h.EMAILS,
		url : h.URL,
		date : h.DATE,
		dateISO : h.DATE,
		number : h.NUMBER,
		digits : h.DIGITS,
		maxlength : jQuery.validator.format(h.MAXLENGTH),
		minlength : jQuery.validator.format(h.MINLENGTH),
		checkDuplicate : jQuery.validator.format(""),
		require_from_group : jQuery.validator.format(""),
		linkedin : jQuery.validator.format(h.LINKEDIN_ERROR),
		max : jQuery.validator.format(h.MAX),
		min : jQuery.validator.format(h.MIN)
	}),
	a.validator.addMethod("checkDuplicate", function (b, e, f) {
		if (this.optional(e))
			return "dependency-mismatch";
		var g = this.previousValue(e);
		if (this.settings.messages[e.name] || (this.settings.messages[e.name] = {}), g.originalMessage = this.settings.messages[e.name].remote, this.settings.messages[e.name].remote = g.message, f = "string" == typeof f && {
				url : f
			}
			 || f, this.pending[e.name])
			return "pending";
		if (g.old === b)
			return g.valid;
		g.old = b;
		var h = this;
		this.startRequest(e);
		var i = {};
		return f.checkType && (i = {
				data : JSON.stringify({
					type : f.checkType,
					value : a(e).val().trim()
				})
			}),
		c.publish("ajax", a.extend(!0, {
				url : "",
				mode : "abort",
				port : "validate" + e.name,
				dataType : "json",
				data : i,
				async : !1
			}, f), d().done(function (c) {
				h.settings.messages[e.name].remote = g.originalMessage;
				var d = c === !0 || "true" === c;
				if (d) {
					var f = h.formSubmitted;
					h.prepareElement(e),
					h.formSubmitted = f,
					h.successList.push(e),
					delete h.invalid[e.name],
					h.showErrors()
				} else {
					var i = {},
					j = c || h.defaultMessage(e, "remote");
					i[e.name] = g.message = a.isFunction(j) ? j(b) : j,
					h.invalid[e.name] = !0,
					h.showErrors(i)
				}
				g.valid = d,
				h.stopRequest(e, d)
			})),
		"pending"
	}),
	a.validator.addMethod("phone", function (b, c) {
		return a(c).val(b.replace(/\D/g, "")),
		!0
	}),
	a.validator.addMethod("linkedin", function (a) {
		var b;
		return b = a.length ? e.test(a) : !0
	}),
	a.validator.addMethod("emails", function (a, b) {
		var c,
		d = !0,
		e = a.split(",");
		if (this.optional(b))
			return d;
		for (var h = 0, i = e.length; i > h; h++)
			if (c = e[h].replace(f, "$1"), !g.test(c))
				return d = !1, !1;
		return d
	});
	var i = {
		onkeyup : !1,
		errorClass : "help-block text-error",
		errorPlacement : function (b, c) {
			a(c).closest("div").append(b)
		}
	};
	return function (b, c) {
		b.validate(a.extend({}, i, c))
	}
}), define("shared/services/comet", ["troopjs-core/component/service", "jquery", "troopjs-utils/deferred", "shared/helper/utils"], function (a, b, c, d) {
	function e() {
		var a = this;
		a.abort || setTimeout(function () {
			f.call(a, a.url)
		}, m)
	}
	function f() {
		var a = this;
		a.ajax = b.ajax({
				url : a.url,
				type : "get",
				dataType : "json",
				timeout : l
			}).done(function (b) {
				b.status && a.publish("comet/" + a.name, b),
				e.call(a)
			}).fail(function () {
				a.abort || j > n && (e.call(a), n++)
			})
	}
	function g(a, b) {
		var c = this;
		if (o[b]) {
			if (o[b] !== a)
				throw "Comet " + b + " has been occupied! Establish comet error!";
			h.apply(c, arguments)
		} else
			h.apply(c, arguments)
	}
	function h(a, b) {
		var c = this;
		o[b] = a,
		c.url = a + "?cid=" + k,
		c.name = b,
		f.call(c)
	}
	function i() {
		var a = this;
		b(window).bind("beforeunload", function () {
			a.disconnect(a.name);
			var b = localStorage.getItem("tabs"),
			c = JSON.parse(b);
			c && 1 !== c.length ? (c = c.filter(function (a) {
						return a !== k
					}), localStorage.setItem("tabs", JSON.stringify(c))) : localStorage.removeItem("tabs"),
			p && localStorage.removeItem("comet")
		})
	}
	var j = 3,
	k = (new Date).getTime(),
	l = 3e5,
	m = 3e3,
	n = 0,
	o = {},
	p = !1,
	q = localStorage.getItem("tabs"),
	r = localStorage.getItem("comet");
	if (q && r) {
		var s = JSON.parse(q);
		s.push(k),
		localStorage.setItem("tabs", JSON.stringify(s))
	} else
		localStorage.setItem("tabs", JSON.stringify([k])), localStorage.setItem("comet", k), p = !0;
	return a.extend({
		connect : function (a, e) {
			var f = this;
			p && g.call(f, a, e),
			window.addEventListener("storage", function (h) {
				var i = h.key;
				switch (i) {
				case "comet":
					if (!h.newValue) {
						var j = localStorage.getItem("tabs"),
						l = JSON.parse(j);
						b.isArray(l) && l[0] === k && (p = !0, g.call(f, a, e), localStorage.setItem("comet", k))
					}
					break;
				case "notification":
					var m = h.newValue;
					if (m && m.length) {
						m = JSON.parse(m);
						var n = b("<div></div>"),
						o = c();
						o.done(function () {
							d.alert("notifiy", n.get(0).outerHTML, !1)
						}),
						n.data("json", m).attr("data-weave", "app/widget/common/notification/main(json)").weave(o)
					}
				}
			}, !1),
			i.call(f)
		},
		disconnect : function () {
			var a = this;
			p && (a.abort = !0, a.ajax.abort())
		}
	})
}), define("shared/services/error-handling", ["jquery", "troopjs-core/component/service", "config"], function (a, b, c) {
	function d(b, d, f) {
		var g = this;
		if (!c.debug) {
			var h = {
				context : a.extend(!0, {
					url : window.location.href
				}, f),
				message : b,
				exc_text : d
			};
			return g.publish("ajax", {
				url : e,
				data : {
					data : JSON.stringify(h)
				},
				type : "post"
			}, a.Deferred()),
			!0
		}
	}
	var e = "/rest/data/errorlog";
	return b.extend({
		"sig/initialize" : function (a, b) {
			var e = this;
			c.debug || (window.onerror = function (a, b, c) {
				return d.call(e, a, {
					jsfile : b,
					line : c
				})
			}),
			b.resolve()
		},
		"hub:memory/error/log" : function (a, b, e, f) {
			var g = this;
			c.debug ? console.error(b) : d.call(g, b, e, f)
		}
	})
}), define("shared/services/load-context", ["compose", "troopjs-core/component/service", "troopjs-utils/when", "config"], function (a, b, c, d) {
	var e,
	f = {
		CONTEXT : "/rest/user/context"
	};
	return b.extend({
		"sig/initialize" : function (a, b) {
			var c = this;
			"/" !== window.location.pathname ? $.get(f.CONTEXT).done(function (a) {
				var f = a;
				d.userLang = f.status !== e && !f.status || !f.user.lang ? "zh_CN" : f.user.lang,
				window.localStorage.setItem("lang", d.userLang),
				d.userContext = f,
				c.publish("context", f),
				b.resolve()
			}) : (c.publish("context", null), b.resolve())
		}
	})
}), define("shared/services/route", ["jquery", "troopjs-core/component/service", "troopjs-utils/uri"], function (a, b, c) {
	function d() {
		var a,
		b = {},
		d = c(window.location.hash.replace(/^#/, "")).path,
		e = 0,
		g = d ? d.length : null;
		if (g)
			for (e; g > e; e++)
				a = d[e].split(f), b[a[0]] = a[1] || "";
		return b
	}
	var e,
	f = "!",
	g = "filter/get/count";
	return b.extend({
		"hub:memory/service/route" : function (a, b) {
			var c = this,
			d = b.path;
			d && c.publish("list/set/filter", d)
		},
		"hub:memory/make/route" : function (b, c) {
			var f,
			h,
			i = this,
			j = 0,
			k = [],
			l = d();
			typeof l.add !== e && (delete l.add, l.list = ""),
			typeof l.detail !== e && (delete l.detail, l.list = ""),
			typeof l.merge !== e && (delete l.merge, l.list = ""),
			typeof l.compose !== e && (delete l.compose, l.list = ""),
			a.extend(l, c);
			for (f in l)
				k[j] = f + (l[f].toString().length ? "!" + l[f] : ""), j++;
			h = k.join("/"),
			window.location.hash.substring(1) === h ? i.publish(g, null) : window.location.hash = h
		}
	})
}), define("shared/widget/application", ["jquery", "troopjs-utils/deferred", "troopjs-utils/when", "troopjs-utils/tr", "troopjs-utils/grep", "troopjs-utils/uri", "troopjs-core/widget/application", "troopjs-core/route/router", "shared/services/error-handling", "shared/helper/ajax"], function (a, b, c, d, e, f, g, h, i, j) {
	function k(e, f) {
		var g = this,
		h = d.call(l, function (a) {
				return b(function (b) {
					a.signal(e, b)
				})
			});
		return f && c.apply(a, h).then(f.resolve, f.reject, f.notify),
		g.publish("application/signal/" + e, f),
		g
	}
	var l = [h(a(window)), i(), j()];
	return g.extend({
		"sig/initialize" : k,
		"sig/finalize" : k,
		"sig/start" : k,
		"sig/stop" : k
	})
}), define("shared/widget/base/main", ["compose", "jquery", "troopjs-core/component/widget", "troopjs-utils/deferred", "shared/helper/utils"], function (a, b, c) {
	function d(a) {
		a.resolve()
	}
	return c.extend(function () {
		var a = this;
		a._json = {}

	}, {
		"sig/initialize" : function (a, b) {
			d.call(this, b)
		},
		formatCurrency : function (a) {
			if (isNaN(a))
				return a;
			for (var b, c = 0 > a ? "-" : "", d = Math.abs(a).toString().split("."), e = d[0], f = d.length > 1 ? "." + d[1] : "", g = e.length, h = g - 1, i = []; h >= 0; )
				h > 2 ? i.unshift(e.slice(h - 2, h + 1)) : i.unshift(e.slice(0, h + 1)), h -= 3;
			return b = i.length > 1 ? i.join(",") : i[0],
			c + b + f
		},
		formatDate : function (a) {
			try {
				var b = new Date(a.replace(/-/g, "/"));
				return [b.getFullYear(), b.getMonth() + 1, b.getDate()].join("-")
			} catch (c) {
				throw c
			}
		},
		getKeyValues : function (a, b) {
			for (var c = [], d = 0; d < a.length; d += 1)
				c.push(a[d][b]);
			return c.join(",")
		},
		convertText : function (a) {
			return a ? a.replace(/(\r\n)|(\n)/g, "<br>") : ""
		}
	})
}), define("troopjs-requirejs/template", [], function () {
	function a(a) {
		function b(a, b, c) {
			return l[m] = b ? '" +' + c + '+ "' : '";' + c + 'o += "',
			"<%" + String(m++) + "%>"
		}
		function j(a, b) {
			return l[b]
		}
		function k(a, b) {
			return i[b] || b
		}
		var l = [],
		m = 0;
		return ('function template(data) { var o = "' + a.replace(c, "").replace(d, b).replace(f, k).replace(e, j) + '"; return o; }').replace(g, h)
	}
	var b = {
		node : function () {
			var a = require.nodeRequire("fs");
			return function (b, c) {
				c(a.readFileSync(b, "utf8"))
			}
		},
		browser : function () {
			var a,
			b,
			c,
			d = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.4.0"];
			if ("undefined" == typeof XMLHttpRequest) {
				for (c = 0; 3 > c; c++) {
					a = d[c];
					try {
						b = ActiveXObject(a);
						break
					} catch (e) {}

				}
				throw new Error("XHR: XMLHttpRequest not available")
			}
			return b = XMLHttpRequest,
			function (a, c) {
				var d = new b;
				d.open("GET", a, !0),
				d.onreadystatechange = function () {
					4 === d.readyState && c(d.responseText)
				},
				d.send(null)
			}
		},
		rhino : function () {
			var a = "utf-8",
			b = java.lang.System.getProperty("line.separator");
			return function (c, d) {
				var e,
				f = new java.io.File(c),
				g = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f), a)),
				h = new java.lang.StringBuffer,
				i = "";
				try {
					for (e = g.readLine(), e && e.length() && 65279 === e.charAt(0) && (e = e.substring(1)), h.append(e); null !== (e = g.readLine()); )
						h.append(b), h.append(e);
					i = String(h.toString())
				}
				finally {
					g.close()
				}
				d(i)
			}
		},
		borked : function () {
			return function () {
				throw new Error("Environment unsupported.")
			}
		}
	},
	c = /^[\n\t\r]+|[\n\t\r]+$/g,
	d = /<%(=)?([\S\s]*?)%>/g,
	e = /<%(\d+)%>/gm,
	f = /(["\n\t\r])/gm,
	g = /o \+= "";| \+ ""/gm,
	h = "",
	i = {
		'"' : '\\"',
		"\n" : "\\n",
		"	" : "\\t",
		"\r" : "\\r"
	},
	j = {},
	k = b["undefined" != typeof process && process.versions && process.versions.node ? "node" : "undefined" != typeof window && window.navigator && window.document || "undefined" != typeof importScripts ? "browser" : "undefined" != typeof Packages ? "rhino" : "borked"]();
	return {
		load : function (b, c, d, e) {
			var f = c.toUrl(b);
			k(f, function (g) {
				try {
					g = "define(function() { return " + a(g, b, f, e.template) + "; })"
				} catch (h) {
					throw h.message = "In " + f + ", " + h.message,
					h
				}
				e.isBuild ? j[b] = g : g += "\n//@ sourceURL='" + f + "'",
				d.fromText(b, g),
				c([b], function (a) {
					d(a)
				})
			})
		},
		write : function (a, b, c) {
			j.hasOwnProperty(b) && c.asModule(a + "!" + b, j[b])
		}
	}
}), define("troopjs-requirejs/template!shared/widget/auth/linkedin/main.html", [], function () {
	return function (a) {
		var b = "",
		c = a.data;
		return b += "\n",
		b += a && a.isbinded ? '\n<div class="pull-right">\n    <button class="btn" data-action="revoke" data-weave="shared/helper/translation" data-i18n="Cancel Authorize"></button>\n</div>\n\n<div class="thumbnail pull-left">\n    <img alt="' + c.formattedName + '" src="' + (c.pictureUrl ? c.pictureUrl : "http://s.c.lnkd.licdn.com/scds/common/u/img/icon/icon_no_photo_50x50.png") + '" width="50" height="50">\n</div>\n    \n<div class="span6">\n    <p>\n        <span class="name-title">' + c.formattedName + "</span>\n    </p>\n    <p>Gllue招聘管理系统已经绑定了您的LinkedIn账号！</p>\n</div>\n" : '\n<span class="pull-left linkedin-logo-large">LINKEDIN</span>\n<a href="/rest/linkedin/oauth?return_url=bind/oauth" class="btn pull-right" data-weave="shared/helper/translation" data-i18n="Authorize"></a>\n'
	}
}), define("shared/widget/auth/linkedin/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils", "template!./main.html"], function (a, b, c, d, e) {
	function f(b) {
		var f = this;
		f.publish("ajax", {
			url : g.ISBINDED
		}, c().done(function (h) {
				h.status ? (f._json.isbinded = h.data.binded && h.data.expire >= 0 ? !0 : !1, f._json.isbinded ? f.publish("ajax", {
						url : g.LINKEDIN_PROFILE
					}, c().done(function (c) {
							a.extend(f._json, c, !0),
							f.html(e, f._json, b)
						})) : (f._json.isbinded = !1, f.html(e, f._json, b))) : (d.alert("error", h.message), f.html(e, f._json, b))
			}))
	}
	var g = {
		ISBINDED : "/rest/linkedin/isbinded",
		LINKEDIN_PROFILE : "/rest/linkedin/profile/~",
		REVOKE : "/rest/linkedin/revoke"
	};
	return b.extend({
		"sig/initialize" : function (a, b) {
			f.call(this, b)
		},
		"sig/start" : function (a, b) {
			d.widgetLoaded.call(this),
			b.resolve()
		},
		"dom/action.click" : a.noop,
		"dom/action/revoke.click" : function (a, b) {
			b.preventDefault();
			var d = this;
			d.publish("ajax", {
				url : g.REVOKE
			}, c().done(function (a) {
					a.status && window.location.reload()
				}))
		}
	})
}), define("troopjs-requirejs/template!shared/widget/auth/main.html", [], function () {
	return function () {
		var a = '<h3 class="heading" data-weave="shared/helper/translation" data-i18n="Authorize SNS"></h3>\n\n<h4>Linkedin</h4>\n<div class="well widget-spin clearfix" data-weave="shared/widget/auth/linkedin/main"></div>';
		return a
	}
}), define("shared/widget/auth/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils", "template!./main.html"], function (a, b, c, d, e) {
	function f(a) {
		var b = this;
		b.html(e, b._json, a)
	}
	return b.extend({
		"sig/initialize" : function (a, b) {
			f.call(this, b)
		}
	})
}), define("troopjs-requirejs/template!shared/widget/common/add-share/main.html", [], function () {
	return function (a) {
		var b = '<label class="control-label" data-weave="shared/helper/translation" data-i18n="Share with"></label>\r\n\r\n<div class="controls text_line ';
		return a && (b += "hide"),
		b += '">\r\n    <a href="#" data-action="share/add" class="addshare" data-weave="shared/helper/translation" data-i18n="Add"></a>\r\n</div>'
	}
}), define("troopjs-requirejs/template!shared/widget/common/add-share/share.html", [], function () {
	return function (a) {
		var b = '<div class="controls add-share">\n    <select name="share_with" class="input-small" data-action="share/with.change" ';
		return a && (b += 'disabled="disabled"'),
		b += '>\n        <option value="people" data-weave="shared/helper/translation" data-i18n="share with people">People</option>\n        <option value="team" data-weave="shared/helper/translation" data-i18n="share with team">Team</option>\n        <option value="everyone" data-weave="shared/helper/translation" data-i18n="share with everyone">Everyone</option>\n    </select>\n\n    <div class="share-to">\n    </div>\n    \n    ',
		a || (b += '\n    <a href="#" class="remove" data-action="share/remove">\n    	<span class="icon-remove"></span>\n    </a>\n    '),
		b += "\n</div>"
	}
}), define("shared/widget/common/add-share/main", ["compose", "jquery", "shared/widget/base/main", "troopjs-utils/deferred", "troopjs-utils/when", "template!./main.html", "template!./share.html", "shared/helper/utils", "config"], function (a, b, c, d, e, f, g, h, i) {
	function j(a, c) {
		var d = this,
		e = d.$add.closest(".controls"),
		f = b(g(d._disabled)),
		h = f.find("select"),
		i = f.find(".share-to");
		if (e.before(f), h.find('option[value="' + a + '"]').prop("selected", !0), "people" === a) {
			var j = b('<select data-cache="true" class="input-medium"></select>');
			i.append(j),
			d._disabled && j.prop("disabled", !0),
			j.attr("data-weave", "shared/widget/common/user-list/main(" + c + ")").weave()
		} else if ("team" === a) {
			var k = b('<div style="width: 150px;"></div>');
			d._disabled && k.addClass("disabled"),
			k.addClass("comtree").data("name", "team").data("url", "/rest/data/team").attr("data-weave", "shared/widget/common/comtree/main(" + c + ")").weave(),
			i.append(k)
		}
		f.find("[data-weave]").weave()
	}
	function k() {
		for (var a = this._share, b = 0, c = a.length; c > b; b += 1)
			j.call(this, a[b].type, a[b].value)
	}
	function l(a) {
		var c = a.val(),
		d = a.closest(".add-share"),
		e = d.find(".share-to");
		if (e.children().remove(), "people" === c)
			e.append('<select data-cache="true" class="input-medium"></select>'), e.find("select").attr("data-weave", "shared/widget/common/user-list/main").weave();
		else if ("team" === c) {
			var f = b('<div style="width: 150px;"></div>');
			f.addClass("comtree").data("name", "team").data("url", "/rest/data/team").attr("data-weave", "shared/widget/common/comtree/main").weave(),
			e.append(f)
		}
	}
	function m(a) {
		var b = this;
		d(function (a) {
			b._json = b._disabled,
			b.html(f, b._json, a)
		}).then(function () {
			n.call(b, a)
		}, a.reject, a.notify)
	}
	function n(a) {
		var b = this;
		b.$addBtn = b.$element.find(".text_line"),
		b.$add = b.$element.find(".addshare"),
		b._share && k.call(b),
		a.resolve()
	}
	var o;
	return c.extend(function (a, b, c) {
		var d = this;
		d._share = c,
		d._disabled = d.$element.data("disabled") !== o ? d.$element.data("disabled") : !1
	}, {
		shareType : i.shareType,
		"sig/initialize" : function (a, b) {
			m.call(this, b)
		},
		reRender : function () {
			var a = this,
			b = d();
			b.done(function () {
				var b = a.teamId;
				if (!a._share) {
					if (a._share === !1)
						return;
					"myteam" !== a.shareType || b === o || isNaN(b) ? "everyone" === a.shareType && j.call(a, "everyone") : j.call(a, "team", b)
				}
			}),
			m.call(this, b)
		},
		"hub:memory/context" : function (a, b) {
			var c = this,
			d = c.teamId = b.user.team.id;
			if (!c._share) {
				if (c._share === !1)
					return;
				"myteam" !== c.shareType || d === o || isNaN(d) ? "everyone" === c.shareType && j.call(c, "everyone") : j.call(c, "team", d)
			}
		},
		"dom/action.click.change" : b.noop,
		"dom/action/share/add.click" : function (a, c) {
			c.preventDefault();
			var d = this;
			b(c.target);
			var e = b(g());
			e.find("[data-weave]").each(function () {
				b(this).weave()
			}),
			d.$addBtn.before(e),
			d.$addBtn.prev().find('[name="share_with"]').trigger("change")
		},
		"dom/action/share/with.change" : function (a, c) {
			var d = b(c.target);
			d.next(),
			d.val(),
			l.call(this, d)
		},
		"dom/action/share/remove.click" : function (a, c) {
			c.preventDefault();
			var d = b(c.target),
			e = d.closest(".controls");
			e.next().find("select[name=share_with]"),
			window.confirm("Are you really to remove it?") && e.remove()
		},
		loadShare : function (a) {
			var b = this;
			b._share = a,
			b.$element.find(".add-share").remove(),
			k.call(b)
		}
	})
}), define("shared/widget/common/autosize/main", ["jquery", "troopjs-core/component/widget", "jquery.autosize"], function (a, b) {
	return b.extend({
		"sig/initialize" : function (a, b) {
			var c = this;
			c.$element.autosize().trigger("autosize.resize").css("resize", "none"),
			b.resolve()
		}
	})
}), define("shared/widget/common/ckeditor/main", ["jquery", "troopjs-core/component/widget", "troopjs-utils/deferred", "troopjs-utils/when", "shared/helper/utils", "config", "ckeditor"], function (a, b, c, d, e, f) {
	function g(b) {
		var e = this,
		f = e.$element,
		g = [];
		if (e._signature) {
			var h = c();
			g.push(h.promise()),
			e.publish("ajax", {
				url : i.SIGNATURE
			}, h.done(function (a) {
					if (e.emailSignature = a.emailSignature, e.emailSignature = e.emailSignature && e.emailSignature.length ? e.emailSignature : "", !e._draft) {
						var b = e.emailSignature;
						e._origin && (b = e._origin + b),
						f.val(b)
					}
				}))
		}
		e._templateVariable && (l.variables = e._templateVariable),
		d.apply(a, g).done(function () {
			try {
				e.editor = CKEDITOR.replace(e.$element.attr("name"), l)
			} catch (a) {
				e.publish("error/log", a.message, a.stack)
			}
			b.resolve()
		})
	}
	var h;
	h = f.userLang ? f.userLang.replace("_", "-").toLowerCase() : "zh-cn";
	var i = {
		SIGNATURE : "/rest/data/userconfig/",
		EMAIL_TEMPLATE : "/rest/data/emailtemplate/",
		CHOOSE_TEMPLATE : "/rest/data/choosetemplate/<id>",
		UPLOAD : "/rest/file/upload"
	},
	j = [{
			name : "styles"
		}, {
			name : "colors"
		}, {
			name : "basicstyles",
			groups : ["basicstyles", "cleanup"]
		}, {
			name : "paragraph",
			groups : ["list", "align"]
		}, {
			name : "links"
		}, {
			name : "insert"
		}, {
			name : "clipboard",
			groups : ["clipboard", "undo"]
		}, {
			name : "tools"
		}, {
			name : "others"
		}
	],
	k = ["宋体/宋体, sans-serif", "黑体/黑体, sans-serif", "楷体/楷体， sans-serif", "微软雅黑/微软雅黑, sans-serif"].concat(CKEDITOR.config.font_names.split(";")).join(";"),
	l = {
		language : h,
		customConfig : "",
		autoGrow_onStartup : !0,
		toolbarGroups : j,
		removeButtons : "Source,Anchor,Cut,Copy,Subscript,Superscript,Save,Language,Styles,Print,NewPage,Underline,Strike,RemoveFormat",
		font_names : k,
		entities : !1,
		allowedContent : !0,
		forceEnterMode : !1,
		shiftEnterMode : CKEDITOR.ENTER_DIV,
		enterMode : CKEDITOR.ENTER_DIV,
		removePlugins : "magicline,flash,forms,find,iframe,pagebreak,smiley,specialchar,about,div,preview,elementspath,showblocks,image,justify,format,horizontalrule",
		resize_enabled : !1,
		imageUploadUrl : i.UPLOAD,
		extraPlugins : "variables,uploadImage,dragresize,autogrow"
	};
	return CKEDITOR.on("dialogDefinition", function (a) {
		var b = a.data.name,
		c = a.data.definition;
		switch (b) {
		case "image":
			c.removeContents("Link"),
			c.removeContents("advanced");
			break;
		case "link":
			c.removeContents("advanced"),
			c.removeContents("upload")
		}
	}),
	b.extend(function (a, b, c) {
		var d = this;
		d._parseTemplate = "undefined" != typeof c ? c : !1,
		d._templateVariable = a.data("variable"),
		d._parseTemplate && (d._templateVariable = a.data("templateVariable")),
		d._template = a.data("template"),
		d._signature = a.data("signature"),
		d._draft = a.data("draft"),
		d._origin = a.data("origin"),
		d.editor = null
	}, {
		"sig/initialize" : function (a, b) {
			g.call(this, b)
		},
		"sig/stop" : function (a, b) {
			this.editor.destroy(),
			b.resolve()
		},
		"hub/email/template/switch" : function (a, b) {
			var c = this;
			c.editor.setData(b.content + c.emailSignature)
		},
		"hub/editor/reset" : function () {
			var a = this;
			a.editor.setData(a.emailSignature)
		}
	})
}), define("troopjs-requirejs/template!shared/widget/common/comtree/main.html", [], function () {
	return function (a) {
		var b = '<input type="hidden" ';
		return a && (b += 'name="' + a + '"'),
		b += '>\n<a href="#" class="comtree-title" data-action="toggle/drop"><span data-weave="shared/helper/translation" data-i18n="Please select"></span><b></b></a>\n\n<div class="comtree-drop">\n    <div class="comtree-drop-inner">\n        <div class="search">\n            <input type="text" data-action="comtree/search" autocomplate="false">    \n        </div>\n        \n        <div class="comtree-tree"></div>\n    </div>\n</div>'
	}
}), define("shared/widget/common/comtree/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "template!./main.html", "shared/helper/utils", "shared/helper/blurb", "jquery.tree"], function (a, b, c, d, e, f) {
	function g(a) {
		var b = this;
		if (a === k || isNaN(a))
			b.$tree.tree("selectNode", null), b.$element.removeClass("on").find(".comtree-title span").text("请选择"), b.$hidden.val(null);
		else {
			var c = b.$tree.tree("getNodeById", a);
			c && (b.$tree.tree("selectNode", c), b.$element.removeClass("on").find(".comtree-title span").text(c.name), b.$hidden.data("text", c.name), b.$hidden.val(c.id))
		}
	}
	function h(a) {
		var b = this,
		c = b.$tree.tree("getNodeByName", a);
		c && (b.$tree.tree("selectNode", c), b.$element.removeClass("on").find(".comtree-title span").text(c.name), b.$hidden.data("text", c.name), b.$hidden.val(c.id))
	}
	function i(a) {
		var b = this;
		b._url ? b.publish("ajax", {
			url : b._url
		}, c().done(function (e) {
				b._json = e,
				c(function (a) {
					b.html(d, b._name, a)
				}).done(function () {
					j.call(b, a)
				})
			})) : c(function (a) {
			b.html(d, b._name, a)
		}).done(function () {
			j.call(b, a)
		})
	}
	function j(a) {
		var b = this;
		b.$drop = b.$element.find(".comtree-drop"),
		b.$tree = b.$element.find(".comtree-tree"),
		b.$search = b.$drop.find(".search input"),
		b.$hidden = b.$element.find('input[type="hidden"]'),
		b.$tree.tree({
			data : b._json
		}),
		b.$tree.on("tree.click tree.select", function (a) {
			var c = a.node;
			c && (b.$element.removeClass("on").find(".comtree-title span").text(c.name), b.$hidden.data("text", c.name), b.$hidden.val(c.id), b.$hidden.trigger("change"))
		}),
		b._id !== k && g.call(b, b._id),
		b._required && b.$element.find('input[type="hidden"]').addClass("required"),
		b.subscribe(b._hub, !0, function (a, c) {
			b.loadData(c)
		}),
		a.resolve()
	}
	var k;
	return {
		PLEASE_SELECT : f.t("Please select...")
	},
	b.extend(function (a, b, c) {
		var d = this;
		d._id = c,
		d._url = a.data("url"),
		d._name = a.data("name"),
		d._required = a.data("required"),
		d._hub = a.data("hub")
	}, {
		"sig/initialize" : function (a, b) {
			i.call(this, b)
		},
		"sig/stop" : function (b, c) {
			a(document).off("mousedown.comtree"),
			c.resolve()
		},
		"dom/action.click.input.keyup.keydown" : a.noop,
		"dom/action/toggle/drop.click" : function (b, c) {
			c.preventDefault();
			var d = this;
			a(c.target),
			d.$element.hasClass("disabled") || (d.$search.width(d.$element.width() - 26), a(document).off("mousedown.comtree"), d.$element.toggleClass("on"), window.setTimeout(function () {
					a(document).on("mousedown.comtree", function (b) {
						a(b.target).closest(d.$element).length || (d.$element.removeClass("on"), a(this).off("mousedown.comtree"))
					})
				}, 50))
		},
		"dom/action/comtree/search.input.keyup.keydown" : function (b, c) {
			var d = this,
			e = a(c.target),
			f = e.val().trim(),
			g = new RegExp(f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), "i");
			f.length ? (d.$tree.find(".jqtree-folder").removeClass("jqtree-closed"), d.$tree.find(".jqtree-title").each(function () {
					g.test(a(this).text()) ? a(this).parent(".jqtree_common").removeClass("hide") : a(this).parent(".jqtree_common").addClass("hide")
				})) : (d.$tree.find(".jqtree-folder").addClass("jqtree-closed"), d.$tree.find(".jqtree_common").removeClass("hide"))
		},
		selectByName : function (a) {
			var b = this;
			a && h.call(b, a)
		},
		selectById : function (a) {
			var b = this;
			g.call(b, a)
		},
		getNodeNameById : function (a) {
			var b = this,
			c = b.$tree.tree("getNodeById", a);
			return c && c.name ? c.name : null
		},
		reset : function () {
			var a = this;
			g.call(a)
		},
		loadData : function (a) {
			var b = this;
			b.$tree.tree && (b._json = a, b.$tree.tree("loadData", b._json))
		}
	})
}), define("shared/widget/common/date-picker/main", ["require", "jquery", "troopjs-utils/deferred", "troopjs-core/component/widget", "config", "jquery.datetimepicker"], function (a, b, c, d, e) {
	return d.extend(function (a, b, c) {
		var d = this;
		d.opt = c || {}

	}, {
		"sig/initialize" : function (c, d) {
			var f = this,
			g = {
				dateFormat : "yy-mm-dd",
				hideIfNoPrevNext : !0,
				changeYear : !0,
				changeMonth : !0,
				hasTime : !1,
				firstDay : 1,
				width : 200
			};
			g = b.extend(g, f.opt),
			e.userLang && "zh_CN" !== e.userLang ? (g.hasTime ? f.$element.datetimepicker(g) : f.$element.datepicker(g), d.resolve()) : a(["jquery.ui.i18n.datapicker.cn"], function () {
				g.hasTime ? f.$element.datetimepicker(g, b.datepicker.regional["zh-CN"]) : f.$element.datepicker(g, b.datepicker.regional["zh-CN"]),
				d.resolve()
			})
		}
	})
}), define("troopjs-requirejs/template!shared/widget/common/quick-search/main.html", [], function () {
	return function () {
		var a = '<form data-action="submit">\n    <input type="text" style="width: 320px;" name="name" autocomplete="off" data-action="quick/search" data-i18n="Please enter Name or ID" data-weave="shared/helper/translation(\'placeholder\')">\n\n    <div class="quick-search-suggestion hide">\n    </div>\n</form>';
		return a
	}
}), define("troopjs-requirejs/template!shared/widget/common/quick-search/suggestion.html", [], function () {
	return function (a) {
		var b,
		c = "",
		d = a.client,
		e = a.candidate,
		f = a.joborder,
		g = 0;
		if (c += '\n\n<ul class="unstyled">\n    ', e.length) {
			for (c += "\n    ", g = 0, b = e.length; b > g; g++) {
				c += "\n    ";
				var h = e[g];
				c += '\n    <li class="suggestion-item ',
				g === b - 1 && (c += "splitter"),
				c += '" data-url="/candidate#detail!id=' + h.id + '">\n        ',
				g || (c += '\n        <strong class="kind" data-weave="shared/helper/translation" data-i18n="People"></strong>\n        '),
				c += '\n        <div class="item-wrap">\n            <div><span class="name">' + [h.englishName, h.chineseName].join(" ").trim() + "</span> (" + h.mobile + ")</div>\n            ",
				h.current && (c += '\n            <div class="muted">\n                ', h.current.title && (c += "\n                " + h.current.title + " \n                "), c += "\n                ", h.current.client && (c += "\n                at\n                " + h.current.client.name + "\n                "), c += "\n            </div>\n            "),
				c += "\n        </div>\n    </li>\n    "
			}
			c += "\n    "
		}
		if (c += "\n\n    ", d.length) {
			for (c += "\n    ", g = 0, b = d.length; b > g; g++) {
				c += "\n    ";
				var i = d[g];
				c += '\n    <li class="suggestion-item ',
				g === b - 1 && (c += "splitter"),
				c += '" data-url="/company#detail!id=' + i.id + '">\n        ',
				g || (c += '\n        <strong class="kind" data-weave="shared/helper/translation" data-i18n="Company"></strong>\n        '),
				c += '\n        <div class="item-wrap">\n            <div><span class="name">' + i.name + "</span> ",
				i.city && (c += "(" + i.city.name + ")"),
				c += "</div>\n            ",
				(i.name1 || i.name2) && (c += '\n            <div class="muted">\n                ', i.name1 && (c += "\n                " + i.name1 + " \n                "), c += "\n                ", i.name2 && (c += "\n                " + i.name2 + "\n                "), c += "\n            </div>\n            "),
				c += "\n        </div>\n    </li>\n    "
			}
			c += "\n    "
		}
		if (c += "\n\n    ", f.length) {
			for (c += "\n    ", g = 0, b = f.length; b > g; g++) {
				c += "\n    ";
				var j = f[g];
				c += '\n    <li class="suggestion-item ',
				g === b - 1 && (c += "splitter"),
				c += '" data-url="/job#detail!id=' + j.id + '">\n        ',
				g || (c += '\n        <strong class="kind" data-weave="shared/helper/translation" data-i18n="Job"></strong>\n        '),
				c += '\n        <div class="item-wrap">\n            <div><span class="name">' + j.jobTitle + '</span></div>\n            <div>\n                <span class="muted">' + j.client.name + "</span>\n            </div>\n        </div>\n    </li>\n    "
			}
			c += "\n    "
		}
		return c += "\n</ul>"
	}
}), define("shared/widget/common/quick-search/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils", "template!./main.html", "template!./suggestion.html"], function (a, b, c, d, e, f) {
	function g(b) {
		var d = this;
		clearTimeout(l),
		l = setTimeout(function () {
				var e = new Date;
				o.push(e),
				d.publish("ajax", {
					url : p.SEARCH + window.encodeURIComponent(b)
				}, c().done(function (b) {
						if (o[o.length - 1] === e) {
							var c = a(f(b));
							n = b.candidate.length + b.client.length + b.joborder.length,
							n ? (d.$suggestion.html(c), c.find("[data-weave]").weave(), d.$suggestion.removeClass("hide")) : (m = -1, d.$suggestion.addClass("hide")),
							o = []
						}
					}))
			}, 300)
	}
	function h(a, b) {
		var c,
		d = this;
		"up" === b ? m >= 0 ? m-- : m = n : n > m ? m++ : m = 0,
		d.$element.find(".suggestion-item").removeClass("hover"),
		c = d.$element.find(".suggestion-item").eq(m).addClass("hover"),
		a.val(c.find(".name").text()),
		(-1 === m || m === n) && a.val(k || "")
	}
	function i(a) {
		var b = this;
		b.html(e, a)
	}
	function j(b) {
		var c = this;
		c.$suggestion = c.$element.find(".quick-search-suggestion"),
		c.$element.on("mouseenter mouseleave", ".suggestion-item", function (b) {
			"mouseleave" === b.type ? (a(this).removeClass("hover"), m = -1) : "mouseenter" === b.type && (a(this).addClass("hover"), m = c.$element.find(".suggestion-item").index(a(this)))
		}).on("click", ".suggestion-item", function () {
			window.location = a(this).data("url")
		}),
		b.resolve()
	}
	var k,
	l,
	m = -1,
	n = 0,
	o = [],
	p = {
		SEARCH : "/rest/data/quick_search?name="
	};
	return b.extend({
		"sig/initialize" : function (a, b) {
			i.call(this, b)
		},
		"sig/start" : function (a, b) {
			j.call(this, b)
		},
		"dom/action.submit.keyup" : a.noop,
		"dom/action/submit.submit" : function () {
			return !1
		},
		"dom/action/quick/search.keyup" : function (b, c) {
			var d = this,
			e = a(c.target),
			f = c.originalEvent.keyCode,
			i = e.val();
			if (!i.length)
				return m = -1, d.$suggestion.addClass("hide"), void 0;
			switch (f) {
			case 38:
				h.call(d, e, "up");
				break;
			case 40:
				h.call(d, e, "down");
				break;
			case 13:
				if (m > -1) {
					var j = d.$element.find(".suggestion-item").filter(".hover");
					window.location = j.data("url")
				}
				break;
			default:
				k = i,
				g.call(d, i)
			}
		},
		"dom/action/suggestion/item.mouseout.mousein" : function (b, c) {
			a(c.target)
		},
		"hub/quick/search/show" : function () {
			var b = this;
			b.$element.removeClass("hide"),
			b.$element.find("input")[0].focus(),
			a(document).on("click", function (c) {
				var d = a(c.target);
				d.closest(b.$element).length || (m = -1, b.$element.addClass("hide"), b.$suggestion.addClass("hide"), b.$element.find("input").val(""), k = null, b.publish("header/quick/search/show"), a(document).off(c))
			})
		}
	})
}), define("troopjs-requirejs/template!shared/widget/common/select-template/main.html", [], function () {
	return function (a) {
		var b = '<option value="" data-weave="shared/helper/translation" data-i18n="Please select"></option>\n\n';
		if (a.user.length) {
			b += '\n<optgroup data-weave="shared/helper/translation(\'label\')" data-i18n="Personal Template">\n';
			for (var c = 0, d = a.user.length; d > c; c++) {
				b += "\n";
				var e = a.user[c];
				b += '\n<option value="' + e.id + '">' + e.name + "</option>\n"
			}
			b += "\n</optgroup>\n"
		}
		if (b += "\n\n", a.system.length) {
			b += '\n<optgroup data-weave="shared/helper/translation(\'label\')" data-i18n="System Template">\n';
			for (var c = 0, d = a.system.length; d > c; c++) {
				b += "\n";
				var f = a.system[c];
				b += '\n<option value="' + f.id + '">' + f.name + "</option>\n"
			}
			b += "\n</optgroup>\n"
		}
		return b
	}
}), define("shared/widget/common/select-template/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "template!./main.html", "shared/helper/utils"], function (a, b, c, d, e) {
	function f(a) {
		var b = this;
		b.type ? b.publish("ajax", {
			url : g.TEMPLATE.replace("<type>", b.type)
		}, c().done(function (c) {
				b._json = c,
				b._options = [],
				c.system && (b._options = b._options.concat(c.system)),
				c.user && (b._options = b._options.concat(c.user)),
				b.html(d, b._json, a)
			})) : a.resolve()
	}
	var g = {
		TEMPLATE : "/rest/data/emailtemplate/<type>",
		CHOOSE_TEMPLATE : "/rest/data/choosetemplate/<id>"
	};
	return b.extend(function (a, b, c) {
		this.type = c
	}, {
		"sig/initialize" : function (a, b) {
			f.call(this, b)
		},
		"dom/action.change" : a.noop,
		"dom/action/template.change" : function (b, d) {
			var f = this,
			h = a(d.target),
			i = h.val();
			if (i) {
				var j = f._options.filter(function (a) {
						return a.id == i
					})[0],
				k = f.$element.data("variable");
				a.isEmptyObject(k) ? f.publish("email/template/switch", j) : f.publish("ajax", {
					url : g.CHOOSE_TEMPLATE.replace("<id>", j.id),
					data : k
				}, c().done(function (a) {
						a.status ? (j.content = a.data.content, j.title = a.data.title, f.publish("email/template/switch", j)) : e.alert("error", a.message)
					}))
			}
		}
	})
}), define("shared/widget/common/slide-helper/base", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "jquery.ui"], function (a, b) {
	function c() {
		var b = this;
		e = a(window).height() - 105,
		b.$element.height(e)
	}
	function d(b) {
		var d = this,
		e = d.$element,
		h = e.find(".handle"),
		i = e.find("iframe"),
		j = e.find(".resize-mask");
		d.$inner = e.find(".inner"),
		e.resizable({
			maxWidth : f,
			minWidth : g,
			handles : {
				w : h
			},
			start : function () {
				i.length && j.css("zIndex", 1),
				e.removeClass("max").removeClass("min")
			},
			stop : function () {
				var a = e.width();
				a === f ? e.addClass("open max").removeClass("min") : a === g && e.removeClass("open max").addClass("min"),
				i.length && j.css("zIndex", -1)
			}
		}),
		a(window).resize(function () {
			c.call(d)
		}),
		b.resolve()
	}
	var e,
	f = 600,
	g = 10;
	return b.extend(function () {
		var a = this;
		c.call(a)
	}, {
		"sig/start" : function (a, b) {
			d.call(this, b)
		},
		"hub:memory/route" : function () {
			this.$element.addClass("hide")
		},
		"dom/action.dblclick.click" : a.noop,
		"dom/action/slide/helper/toggle.dblclick" : function () {
			var a = this,
			b = a.$element;
			b.hasClass("open") ? b.removeClass("open max").addClass("min") : b.addClass("open max").removeClass("min")
		},
		"dom/action/slide/helper/close.click" : function (a, b) {
			b.preventDefault();
			var c = this;
			c.$element.addClass("hide")
		},
		"hub/slide/helper/close" : function () {
			var a = this;
			a.$element.addClass("hide")
		}
	})
}), define("shared/widget/common/tagit/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils", "jquery.tagit"], function (a, b, c) {
	function d(b) {
		var d,
		f = this,
		g = {
			readOnly : f.readOnly,
			editable : f.editable,
			tagLimit : f.tagLimit,
			allowSpaces : !0,
			onSaveTags : f.onSaveTags
		};
		f.type && (d = e.replace("<type>", f.type), a.extend(!0, g, {
				allowSpaces : !0,
				autocomplete : {
					minLength : 2,
					source : function (a, b) {
						var e = this,
						g = e.element.tagit("assignedTags");
						f.publish("ajax", {
							url : d.replace("<name>", window.encodeURIComponent(a.term))
						}, c().done(function (a) {
								var c = [];
								a.forEach(function (a) {
									g.indexOf(a) < 0 && c.push(a)
								}),
								b(c)
							}))
					}
				}
			})),
		f.$element.tagit(g),
		b.resolve()
	}
	var e = "/rest/data/autocomplete?type=<type>&name=<name>";
	return b.extend(function (a, b, c, d, e) {
		this.type = this.$element.data("type"),
		this.tagLimit = this.$element.data("max"),
		this.readOnly = c,
		this.editable = d,
		this.onSaveTags = e
	}, {
		"sig/initialize" : function (a, b) {
			d.call(this, b)
		}
	})
}), define("troopjs-requirejs/template!shared/widget/common/upload/main.html", [], function () {
	return function () {
		var a = '<span class="btn btn-file">\n    <span class="fileupload-new" data-weave="shared/helper/translation" data-i18n="Select file"></span>\n    <input type="file" name="file" data-action="fileupload">\n</span>\n\n<div class="progress progress-striped active hide">\n    <div class="bar"></div>\n</div>';
		return a
	}
}), define("shared/widget/common/upload/main", ["jquery", "troopjs-core/component/widget", "troopjs-utils/deferred", "troopjs-utils/when", "template!./main.html", "shared/helper/utils", "jquery.form"], function (a, b, c, d, e, f) {
	function g(a) {
		var b = this;
		b.html(e, {}, a)
	}
	function h(a) {
		var b = this,
		c = b.$element;
		b.config.multiple && b.$element.find('input[name="file"]').attr("multiple", "multiple"),
		b.$btnFile = c.find(".btn-file"),
		b.$progress = c.find(".progress"),
		b.$bar = c.find(".bar"),
		a.resolve()
	}
	var i = "/rest/file/upload";
	return b.extend(function (a, b, c, d) {
		var e = this;
		e.config = c,
		e.validate = d
	}, {
		"sig/initialize" : function (a, b) {
			g.call(this, b)
		},
		"sig/start" : function (a, b) {
			h.call(this, b)
		},
		"sig/stop" : function (a, b) {
			var c = this;
			c.timeId && clearTimeout(c.timeId),
			b.resolve()
		},
		"dom/action.change.click" : a.noop,
		"dom/action/fileupload.change.click" : function (b, c) {
			var d = this,
			e = a(c.target),
			g = e[0].files,
			h = c.namespace,
			j = d.config,
			k = !0;
			if ("click" === h) {
				if (c.stopPropagation(), d.$element.find(".btn-file").hasClass("disabled"))
					return !1;
				if (j.beforeUpload)
					return j.beforeUpload()
			} else if ("change" === h) {
				if (j.validate) {
					for (var l = 0, m = g.length; m > l; l++)
						if (!j.validate(g[l]))
							return j.onValidateError && j.onValidateError(), k = !1, void 0;
					if (!k)
						return
				}
				var n = e.closest("form"),
				o = {
					url : i,
					type : "post",
					beforeSubmit : function (a, b, c) {
						d.$btnFile.addClass("hide"),
						d.$progress.removeClass("hide"),
						j.beforeSubmit && j.beforeSubmit(a, b, c)
					},
					uploadProgress : function (a, b, c, e) {
						d.$bar.css("width", e + "%"),
						j.uploadProgress && j.uploadProgress(a, b, c, e)
					},
					success : function (a) {
						d.timeId = setTimeout(function () {
								d.$btnFile.removeClass("hide"),
								d.$progress.addClass("hide"),
								d.$bar.css("width", 0)
							}, 500),
						j.success && (e.val(""), j.success(a))
					},
					error : function (a) {
						d.$btnFile.removeClass("hide"),
						d.$progress.addClass("hide"),
						f.alert("error", JSON.parse(a.responseText).message),
						j.error && j.error(a)
					}
				};
				j.data && a.extend(o, {
					data : {
						data : JSON.stringify(j.data)
					}
				}),
				j.model && a.extend(o, {
					data : {
						data : JSON.stringify({
							model : j.model
						})
					}
				}),
				j.url && a.extend(o, {
					url : j.url
				}),
				n.ajaxSubmit(o)
			}
		}
	})
}), define("troopjs-requirejs/template!shared/widget/common/user-list/main.html", [], function () {
	return function (a) {
		var b = "",
		c = 0,
		d = a.length;
		for (b += '\r\n<option value=""></option>\r\n'; d > c; c += 1)
			b += '\r\n    <option value="' + a[c].id + '">' + a[c].name + "</option>\r\n";
		return b
	}
}), define("app/widget/common/select2/main", ["require", "jquery", "config", "select2"], function (a, b, c) {
	return c.userLang && "zh_CN" !== c.userLang || a(["select2.zh-CN"], function () {}),
	b
}), define("shared/widget/common/user-list/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "template!./main.html", "shared/helper/utils", "shared/helper/blurb", "app/widget/common/select2/main"], function (a, b, c, d, e, f) {
	function g(a) {
		var b = this,
		e = i.USER_LIST;
		b.role && (e += "?role=" + b.role),
		b._list ? (b._json = b._list, b.html(d, b._json, a)) : b.publish("ajax", {
			url : e
		}, c().done(function (a) {
				a.length && (b._json = a)
			}).then(function () {
				b.html(d, b._json, a)
			}))
	}
	var h,
	i = {
		USER_LIST : "/rest/data/userlist"
	},
	j = {
		PLACEHOLDER : f.t("Please select")
	};
	return b.extend(function (b, c, d, e) {
		var f = this;
		f.role = f.$element.data("role"),
		"number" == typeof d && (f._id = d, f._list = e),
		a.isArray(d) && (f._list = d)
	}, {
		"sig/initialize" : function (a, b) {
			g.call(this, b)
		},
		"sig/stop" : function (a, b) {
			this.$element.select2("destroy"),
			b.resolve()
		},
		"hub:memory/context" : function (a, b) {
			var c = this;
			c._userId = b.user.id,
			c._id !== h ? c.$element.val(c._id || "").select2({
				placeholder : j.PLACEHOLDER,
				allowClear : !0
			}) : c.$element.val(c._userId).select2({
				placeholder : j.PLACEHOLDER,
				allowClear : !0
			})
		}
	})
}), define("troopjs-requirejs/template!shared/widget/feedback/quick-post/main.html", [], function () {
	return function () {
		var a = '<div class="handle">\n    <a href="#" data-action="quick/post" data-weave="shared/helper/translation" data-i18n="Feedback"></a>\n</div>';
		return a
	}
}), define("shared/widget/feedback/quick-post/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "template!./main.html"], function (a, b, c, d) {
	function e(a) {
		var b = this;
		b.html(d, a)
	}
	return b.extend({
		"sig/initialize" : function (a, b) {
			e.call(this, b)
		},
		"dom/action.click" : a.noop,
		"dom/action/quick/post.click" : function (a, b) {
			b.preventDefault();
			var c = this;
			c.publish("modal/feedback-quick-post/show")
		}
	})
}), define("shared/widget/filter/query", ["troopjs-utils/deferred", "shared/helper/utils"], function (a, b) {
	var c = {
		url : "",
		items : {},
		toString : function () {
			var a = [];
			for (var b in this.items)
				a.push(this.items[b]);
			return a.join("&")
		},
		addAttr : function (a) {
			for (var b in a)
				c[b] || (c[b] = a[b])
		},
		addQuery : function (a, b) {
			a && (this.items[a] = b)
		},
		deleteQuery : function (a) {
			delete this.items[a]
		},
		save : function (d) {
			var e = this,
			f = {
				query : window.decodeURIComponent(c.toString()),
				name : d,
				count : 0
			};
			if (!c.url)
				throw "Url is empty!";
			e.publish("ajax", {
				url : c.url,
				data : {
					data : JSON.stringify(f)
				},
				type : "post",
				dataType : "json"
			}, a().done(function (a) {
					a.status ? (b.alert("success", "New search is added successfully!"), f.id = a.data, e.publish("saved/filter/add", f), e.$element.find(".save-filter-form").addClass("hide")) : b.alert("error", a.message)
				}))
		},
		reset : function () {
			for (var a in this.items)
				this.deleteQuery(a)
		}
	};
	return c
}), define("shared/widget/filter/base", ["compose", "jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils", "shared/widget/filter/query", "config"], function (a, b, c, d, e, f) {
	function g() {
		var a = this.$element.find(".save-filter"),
		b = this.$element.find(".deletable");
		b.filter(":visible").length ? a.removeClass("hide") : a.addClass("hide")
	}
	function h() {
		this.publish("make/route", {
			filter : f.toString(),
			page : 1
		})
	}
	return c.extend({
		"hub:memory/filter/set" : function (a, b) {
			var c = this;
			if (!c._setFilter)
				throw "Derive class must implement _setFilter method.";
			f.reset();
			var d = function () {
				var a = [];
				if (!b)
					return a;
				var c,
				d = b.split("&");
				for (var e in d)
					c = d[e].split("="), a.push(c);
				return a
			}
			();
			c.$element.find(".deletable").addClass("hide");
			for (var e = d.length; e--; )
				c._setFilter.call(c, d[e]);
			g.call(c)
		},
		"hub:memory/reset/filter" : function () {
			f.reset()
		},
		"dom/action.click" : b.noop,
		"dom/action/form.click" : function (a, c, d) {
			c.preventDefault();
			var e = this,
			i = b(c.target),
			j = i.closest("form"),
			k = i.closest(".dropdown");
			f[d](j),
			g.call(e),
			k.removeClass("open"),
			h.call(e)
		},
		"dom/action/tag/remove.click" : function (a, c) {
			var d = b(c.target);
			d.addClass("hide"),
			g.call(this),
			f.deleteQuery(d.data("query")),
			h.call(this)
		},
		"dom/action/filter/save/toggle.click" : function (a, c) {
			c.preventDefault();
			var d = this,
			e = b(c.target);
			e.hasClass("save-filter") ? e.addClass("hide") : g.call(d),
			d.$element.find(".save-filter-form").toggleClass("hide")
		},
		"dom/action/filter/save.click" : function (a, c) {
			c.preventDefault();
			var d = b(c.target),
			e = d.closest("form"),
			g = e.find("input"),
			h = b.trim(g.val());
			h.length && (f.save.call(this, h), g.val(""))
		},
		"dom/action/filter/search.click" : function () {
			h.call(this)
		},
		"dom/action/dropdown.click" : function (a, c) {
			c.preventDefault();
			var d = this,
			e = b(c.target),
			f = e.siblings(".dropdown-menu"),
			g = b(document),
			h = e.closest("li");
			d.$element.find(".dropdown").removeClass("open"),
			h.toggleClass("open"),
			g.on("click.filter.dropdown", function (a) {
				var c = b(a.target);
				c.closest(".tt-suggestion").length || c.closest(f).length || c.closest("#ui-datepicker-div").length || !h.hasClass("open") || (h.removeClass("open"), g.off("click.filter.dropdown"))
			})
		},
		"dom/action/moreless.click" : function (a, c) {
			c.preventDefault();
			var d = b(c.target);
			this.$element.find("li.divider.last-show").nextUntil(".filter-toggle").toggleClass("hide"),
			d.find("span").toggleClass("icon-arrow-right icon-arrow-left")
		}
	})
}), define("troopjs-requirejs/template!shared/widget/header/main.html", [], function () {
	return function (a) {
		var b = "",
		c = a.user.role.toUpperCase(),
		d = "REGULAR" === c,
		e = "FINANCE" === c,
		f = "ADMIN" === c;
		return b += '\n<div class="navbar-inner">\n    <span id="logo">\n        <span class="gllue">Gllue</span>\n    </span>\n\n    <div class="container-fluid">\n        <ul class="nav pull-right right-nav">\n            ',
		"Linkedin" !== this.config.clientType && (b += '\n            <li>\n                <a href="/mail/center#list/filter!mbox=inbox/page!1" class="icon" data-weave="shared/helper/translation(\'title\')" data-i18n="Email">\n                    <span class="label">\n                        <span>' + a.email_count + '</span>\n                        <i class="icon-envelope icon-white"></i>\n                    </span>\n                </a>\n            </li>\n            <li>\n                <a href="/calendar" class="icon" data-weave="shared/helper/translation(\'title\')" data-i18n="Calendar">\n                    <span class="label">\n                        <span>' + a.calendar_count + '</span>\n                        <i class="icon-calendar icon-white"></i>\n                    </span>\n                </a>\n            </li>\n            <li>\n                <a href="/task" class="icon" data-weave="shared/helper/translation(\'title\')" data-i18n="Todo">\n                    <span class="label">\n                        <span>' + a.todo_count + '</span>\n                        <i class="icon-ticked icon-white"></i>\n                    </span>\n                </a>\n            </li>\n            <li>\n                <a href="/notification-center" class="icon" data-weave="shared/helper/translation(\'title\')" data-i18n="Notification center">\n                    <span class="label">\n                        <span>' + a.message_count + '</span>\n                        <i class="icon-bell icon-white"></i>\n                    </span>\n                </a>\n            </li>\n            <li>\n                <a href="/floating" class="icon" title="Floating">\n                    <span class="label">\n                        <span>' + a.floating_count + '</span>\n                        <i class="icon-floating icon-white"></i>\n                    </span>\n                </a>\n            </li>\n            ', d && (b += '\n            <li class="dropdown">\n                <a href="#" class="dropdown-toggle icon" data-toggle="dropdown" data-weave="shared/helper/translation(\'title\')" data-i18n="Add new">\n                    <span class="label"><i class="icon-plus icon-white"></i></span>\n                </a>\n                <ul class="dropdown-menu">\n                    <li><a href="/candidate#add" data-weave="shared/helper/translation" data-i18n="New People"></a></li>\n                    <li><a href="/company#add" data-weave="shared/helper/translation" data-i18n="New Company"></a></li>\n                    <li><a href="/job#add" data-weave="shared/helper/translation" data-i18n="Add a Job"></a></li>\n                    <li><a href="/import/excel" data-i18n="Excel Import Center" data-weave="shared/helper/translation"></a></li>\n                    <li><a href="/mass/import" data-weave="shared/helper/translation" data-i18n="Mass import people"></a></li>\n                </ul>\n            </li>\n            '), b += "\n\n            ", "Linkedin" !== this.config.clientType && (d || f) && (b += '\n            <li>\n                <a href="#" class="icon" data-i18n="Search" data-action="quick/search/show" data-weave="shared/helper/translation(\'title\')">\n                    <span class="label">\n                        <i class="icon-search icon-white"></i>\n                    </span>\n                </a>\n            </li>\n            '), b += "\n\n            "),
		b += '\n            <li class="divider-vertical hidden-phone hidden-tablet"></li>\n\n            <li class="dropdown">\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown">' + a.user.englishName + '<b class="caret"></b></a>\n                <ul class="dropdown-menu">\n                    \n                    ',
		b += "Linkedin" !== this.config.clientType ? '\n                    <li><a href="/my/profile" data-weave="shared/helper/translation" data-i18n="Personal Settings"></a></li>\n                    <li class="dropdown">\n                        <a href="/extension">\n                            <span data-weave="shared/helper/translation" data-i18n="App Center"></span>\n                        </a>\n                    </li>\n                    <!-- <li><a href="/user" data-weave="shared/helper/translation" data-i18n="Internal Contacts"></a></li> -->\n                    ' : '\n                    <li><a href="/password" data-weave="shared/helper/translation" data-i18n="System settings"></a></li>\n                    ',
		b += '\n                    <li class="divider"></li>\n                    <li><a href="/support-center" data-weave="shared/helper/translation" data-i18n="Gllue Support"></a></li>\n                    <li><a href="http://www.gllue.com/" target="_blank" data-weave="shared/helper/translation" data-i18n="Gllue Software"></a></li>\n                    <li class="divider"></li>\n                    <li><a href="/" data-action="logout" data-weave="shared/helper/translation" data-i18n="Logout"></a></li>\n                </ul>\n            </li>\n        </ul>\n\n\n        <a data-target=".nav-collapse" data-toggle="collapse" class="btn_menu">\n            <span class="icon-list-alt icon-white"></span>\n        </a>\n        \n        <div class="nav-collapse collapse">\n            <ul class="nav">\n                ',
		"Linkedin" !== this.config.clientType ? (b += "\n                ", d && (b += '\n                <li>\n                    <a href="/dashboard">\n                        <span data-weave="shared/helper/translation" data-i18n="Home Page"></span>\n                    </a>\n                </li>\n                <li>\n                    <a href="/candidate#list"><span data-weave="shared/helper/translation" data-i18n="People"></span></a>\n                </li>\n                <li>\n                    <a href="/company#list"><span data-weave="shared/helper/translation" data-i18n="Company"></span></a>\n                </li>\n                <li>\n                    <a href="/job#list" data-weave="shared/helper/translation" data-i18n="jobs"></a>\n                </li>\n                '), b += "\n                ", e && (b += '\n                <li>\n                    <a href="/invoice" data-weave="shared/helper/translation" data-i18n="invoices"></a>\n                </li>\n                '), b += "\n                ", f && (b += '\n                <li class="dropdown">\n                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span data-weave="shared/helper/translation" data-i18n="Security Center"></span> <b class="caret"></b></a>\n                    <ul class="dropdown-menu">\n                        <li><a href="/login/log" data-weave="shared/helper/translation" data-i18n="Login Log"></a></li>\n                        <li><a href="/user/activity" data-weave="shared/helper/translation" data-i18n="User Activity"></a></li>\n                        <li><a href="/ip/privacy" data-weave="shared/helper/translation" data-i18n="用户IP访问限制"></a></li>\n                        <li><a href="/anti/duplication" data-weave="shared/helper/translation" data-i18n="数据防复制"></a></li>\n                        <li><a href="/invoice/email" data-weave="shared/helper/translation" data-i18n="财务信息邮件通知"></a></li>\n                    </ul>\n                </li>\n                <li>\n                    <a href="/user" data-weave="shared/helper/translation" data-i18n="User Management"></a>\n                </li>\n                <li>\n                    <a href="/setting" data-weave="shared/helper/translation" data-i18n="System Management"></a>\n                </li>\n                <li>\n                    <a href="/candidate#list"><span data-weave="shared/helper/translation" data-i18n="People"></span></a>\n                </li>\n                <li>\n                    <a href="/company" data-weave="shared/helper/translation" data-i18n="Company"></a>\n                </li>\n                '), b += '\n                <li class="dropdown">\n                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span data-weave="shared/helper/translation" data-i18n="Reportings"></span> <b class="caret"></b></a>\n                    <ul class="dropdown-menu">\n                        <li><a href="/revenue" data-weave="shared/helper/translation" data-i18n="Revenue"></a></li>\n                        <li><a href="/kpi" data-weave="shared/helper/translation" data-i18n="KPI - Main Reporting"></a></li>\n                        <li><a href="/kpi#?type=note" data-weave="shared/helper/translation" data-i18n="KPI - Note"></a></li>\n                        <li><a href="/kpi#?type=job" data-weave="shared/helper/translation" data-i18n="KPI - Job"></a></li>\n                        <li><a href="/kpi#?type=attachment" data-weave="shared/helper/translation" data-i18n="KPI - Attachment"></a></li>\n                        <li><a href="/kpi#?type=task" data-weave="shared/helper/translation" data-i18n="KPI - Task"></a></li>\n                        <li><a href="/kpi#?type=company">\n                            KPI - <span data-weave="shared/helper/translation" data-i18n="Company"></span>\n                        </a></li>\n                    </ul>\n                </li>\n                <li>\n                    <a href="/document" data-weave="shared/helper/translation" data-i18n="Document"></a>\n                </li>\n                ', this._linkedinCountDown >= 0 && (b += '\n                <li class="dropdown">\n                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">\n                        <span data-weave="shared/helper/translation" data-i18n="Gllue Data"></span> <b class="caret"></b>\n                    </a>\n                    <ul class="dropdown-menu">\n                        <li><a href="/data-center/people" data-weave="shared/helper/translation" data-i18n="Gllue people"></a></li>\n                        <li><a href="/data-center/company" data-weave="shared/helper/translation" data-i18n="Gllue companies"></a></li>\n                        <li><a href="/data-center/report" data-weave="shared/helper/translation" data-i18n="Reportings"></a></li>\n                        <li><a target="_blank" href="http://support.gllue.com/?p=1241" data-weave="shared/helper/translation" data-i18n="Tutorial"></a></li>\n                    </ul>\n                </li>\n                '), b += "\n                ") : b += '\n                <li>\n                    <a href="/data-center/people"><span data-weave="shared/helper/translation" data-i18n="People"></span></a>\n                </li>\n                <li>\n                    <a href="/data-center/company"><span data-weave="shared/helper/translation" data-i18n="Company"></span></a>\n                </li>\n                <li><a href="/data-center/report" data-weave="shared/helper/translation" data-i18n="Reportings"></a></li>\n                ',
		b += "\n            </ul>\n        </div>\n\n        ",
		"Linkedin" !== this.config.clientType && (d || f) && (b += '\n        <div class="quick-search hide" data-weave="shared/widget/common/quick-search/main">\n        </div>\n        '),
		b += "\n    </div>\n</div>"
	}
}), define("shared/widget/header/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils", "template!./main.html", "config"], function (a, b, c, d, e, f) {
	function g() {
		var b = this;
		b.html(e, b._json, c().done(function () {
				b.$search = b.$element.find(".quick-search"),
				b.$rightNav = b.$element.find(".right-nav"),
				b.$input = b.$search.find('input[name="name"]'),
				a(".dropdown-menu li").each(function () {
					var b = a(this);
					b.children("ul").length && (b.addClass("sub-dropdown"), b.children("ul").addClass("sub-menu"))
				}),
				a(".sub-dropdown").on("mouseenter", function () {
					a(this).addClass("active").children("ul").addClass("sub-open")
				}).on("mouseleave", function () {
					a(this).removeClass("active").children("ul").removeClass("sub-open")
				})
			}))
	}
	var h = {
		LOGOUT : "/rest/user/logout",
		PEOPLE : "/candidate#detail!id="
	};
	return b.extend(function () {
		this._linkedinCountDown = f.userContext.system.linkedin
	}, {
		config : f,
		"hub:memory/context" : function (a, b) {
			var c = this;
			c._json = b,
			g.call(c)
		},
		"dom/action.click.focusout.submit" : a.noop,
		"dom/action/logout.click" : function (b, d) {
			d.preventDefault();
			var e = this,
			f = a(d.target).attr("href");
			e.publish("ajax", {
				url : h.LOGOUT
			}, c().done(function () {
					location.href = f
				}))
		},
		"hub/header/quick/search/show" : function () {
			var a = this;
			a.$rightNav.removeClass("hide")
		},
		"dom/action/quick/search/show.click" : function (a, b) {
			b.preventDefault();
			var c = this;
			c.$rightNav.addClass("hide"),
			c.publish("quick/search/show")
		}
	})
}), define("shared/widget/list-ordering/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils"], function (a, b, c, d) {
	var e = "make/route",
	f = {
		LISTVIEW : "/rest/user/listview"
	};
	return b.extend(function (a, b, c) {
		this._listType = c
	}, {
		"dom/action.change" : a.noop,
		"dom/action/ordering.change" : function (b, c) {
			var d = this,
			f = a(c.target).val();
			d.publish(e, {
				ordering : f
			})
		},
		"hub:memory/ordering/set" : function (a, b) {
			var e = this;
			e.publish("ajax", {
				url : f.LISTVIEW,
				data : {
					data : JSON.stringify({
						list : e._listType,
						key : "ordering",
						value : b
					})
				},
				type : "post"
			}, c().done(function (a) {
					a.status || d.alert("error", a.message)
				})),
			e.$element.val(b)
		}
	})
}), define("shared/widget/list-paginate/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils"], function (a, b, c, d) {
	var e = "make/route",
	f = {
		LISTVIEW : "/rest/user/listview"
	};
	return b.extend(function (a, b, c) {
		this._listType = c
	}, {
		"dom/action.change" : a.noop,
		"dom/action/paginate.change" : function (b, c) {
			var d = this,
			f = a(c.target).val();
			d.publish(e, {
				paginate : f
			})
		},
		"hub:memory/paginate/set" : function (a, b) {
			var e = this;
			e.publish("ajax", {
				url : f.LISTVIEW,
				data : {
					data : JSON.stringify({
						list : e._listType,
						key : "paginate",
						value : b
					})
				},
				type : "post"
			}, c().done(function (a) {
					a.status || d.alert("error", a.message)
				})),
			e.$element.val(b)
		}
	})
}), define("shared/widget/list/base", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils"], function (a, b, c, d) {
	function e(a) {
		return a.replace(/#/g, "%23")
	}
	function f() {
		var a,
		b,
		f,
		g,
		n = this,
		q = "",
		r = 0;
		if (n.viewType !== h && n.options !== h) {
			n.$element.find(".loading-area").addClass("widget-spin");
			var s = n.options,
			t = s.length;
			if ("[object Array]" === Object.prototype.toString.call(s))
				for (r; t > r; r++) {
					var u = s[r];
					i.test(u) ? a = RegExp.$1 : j.test(u) ? b = RegExp.$1 : k.test(u) ? (f = RegExp.$1, n.publish("ordering/set", f)) : l.test(u) && (g = RegExp.$1, n.publish("paginate/set", g))
				}
			a && (n.publish("filter/set", b), q = n._url + (a ? "&page=" + a : "") + (b ? "&" + b : "") + (f ? "&ordering=" + f : "") + (g ? "&paginate_by=" + g : ""), n.lang && (q += "&lang=" + n.lang), c(function (a) {
					n.publish("ajax", {
						url : e(q)
					}, c().done(function (a) {
							if ("finalize" !== n.phase) {
								if (a.status !== h && !a.status)
									return d.alert("error", "Filter list error: " + a.message), void 0;
								n._json = a,
								n.publish(n._listType + p, a),
								n.publish(o, a),
								n.publish(m, a.count)
							}
						}).always(function () {
							a.resolve()
						}))
				}).done(function () {
					"finalize" !== n.phase && c(function (a) {
						n.renderList(a)
					}).done(function () {
						try {
							n.$element.find(".loading-area").removeClass("widget-spin")
						} catch (a) {
							n.publish("error/log", a.message, a.stack, {
								phase : n.phase,
								context : n
							})
						}
					})
				}))
		}
	}
	function g(a) {
		var b = this,
		c = b._json.list;
		return b.$container ? (b.$container.children().remove(), c && c.length ? (b.$container.removeClass("hide"), b.appendItems(c)) : b.$container.addClass("hide"), a.resolve(), void 0) : (a.resolve(), void 0)
	}
	var h,
	i = /^page!(\d*)/,
	j = /^filter!(.*)/,
	k = /^ordering!(.*)/,
	l = /^paginate!(\d*)/,
	m = "filter/get/count",
	n = "make/route",
	o = "sidebar/update/list",
	p = "/paging/set",
	q = {
		LISTVIEW : "/rest/user/listview"
	};
	return b.extend({
		"hub:memory/context" : function (b, d) {
			var e,
			g,
			i,
			j = this,
			k = {};
			j.context = d,
			j._listType && d.user.listview[j._listType] ? (j.viewType = d.user.listview[j._listType].list !== h ? d.user.listview[j._listType].list : !1, e = d.user.listview[j._listType].ordering, e && (k.ordering = e), g = d.user.listview[j._listType].paginate, g && (k.paginate = g), j.columns = d.user.listview[j._listType].columns, j.colOrder = d.user.listview[j._listType].colOrder, i = d.user.listview[j._listType].lang, j.lang = i, a.isEmptyObject(k) || j.publish(n, k)) : j.viewType = !1,
			c(function (a) {
				j.render ? j.render(a) : a.resolve()
			}).done(function () {
				j.contextLoaded = !0,
				f.call(j)
			})
		},
		"hub:memory/list/set/filter" : function (a, b) {
			var c = this;
			c.options = b,
			c.contextLoaded && f.call(c)
		},
		"hub/list/reload" : function () {
			f.call(this)
		},
		"hub/toggle/mass/action" : function () {
			var a = this,
			b = a.$element.find('[data-action="list/check"]').length,
			c = a.$element.find('[data-action="list/check"]').filter(":checked").length;
			c ? a.$massActions.removeClass("disabled") : a.$massActions.addClass("disabled"),
			b === c ? (a.$toggleAll.prop("indeterminate", !1), a.$toggleAll.prop("checked", !0)) : 0 === c ? (a.$toggleAll.prop("indeterminate", !1), a.$toggleAll.prop("checked", !1)) : c > 0 && b !== c && (a.$toggleAll.prop("checked", !1), a.$toggleAll.prop("indeterminate", !0))
		},
		renderList : function (a) {
			g.call(this, a)
		},
		"dom/action.click.change" : a.noop,
		"dom/action/listview.click" : function (b, d) {
			d.preventDefault();
			var e = this,
			g = a(d.target),
			h = g.hasClass("detail-view");
			h ? g.removeClass("detail-view").addClass("table-view") : g.removeClass("table-view").addClass("detail-view"),
			e.publish("ajax", {
				url : q.LISTVIEW,
				data : {
					data : JSON.stringify({
						list : e._listType,
						key : "list",
						value : h
					})
				},
				type : "post"
			}, c().done(function (a) {
					if (a.status && e.render) {
						e.viewType = h;
						var b = c();
						b.done(function () {
							f.call(e)
						}),
						e.render(b)
					}
				}))
		},
		"dom/action/list/toggle/all.click" : function (b, c) {
			var d = this,
			e = a(c.target);
			e.is(":checked") ? (d.publish("list/check/all"), d.publish("toggle/mass/action")) : (d.publish("list/uncheck/all"), d.publish("toggle/mass/action"))
		}
	})
}), define("troopjs-requirejs/template!shared/widget/login/main.html", [], function () {
	return function (a) {
		var b = "",
		c = a.links;
		if (b += '\r\n<header>\r\n    <span id="logo">\r\n        <span class="gllue">Gllue</span>\r\n    </span>\r\n</header>\r\n\r\n<table>\r\n    <tr>\r\n        <td class="recommend">\r\n            <div class="outer">\r\n                <div class="inner">\r\n                    <p>\r\n                        <span>推荐浏览器：Google Chrome</span>\r\n                    </p>\r\n                    <p>\r\n                        <a href="http://down.tech.sina.com.cn/download/d_load.php?d_id=40975&down_id=3&ip=116.231.235.36" target="_blank">Windows版下载</a>\r\n                        <a href="http://down.tech.sina.com.cn/download/d_load.php?d_id=43718&down_id=5&ip=116.231.235.36" target="_blank">Mac版下载</a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </td>\r\n        <td>\r\n            <div class="login_box">\r\n                <form id="login_form">\r\n                    <div class="top_b" data-weave="shared/helper/translation" data-i18n="Sign in to Gllue"></div>    \r\n                    <div class="alert alert-error alert-login hide">\r\n                        Username or Password is incorrect.\r\n                    </div>\r\n                    <div class="cnt_b">\r\n                        <div class="formRow">\r\n                            <div class="input-prepend">\r\n                                <span class="add-on"><i class="icon-user"></i></span><input type="text" id="email" name="email" placeholder="Email" />\r\n                            </div>\r\n                        </div>\r\n                        <div class="formRow">\r\n                            <div class="input-prepend">\r\n                                <span class="add-on"><i class="icon-lock"></i></span><input type="password" id="password" name="password" placeholder="Password"/>\r\n                            </div>\r\n                        </div>\r\n                        <div class="formRow clearfix">\r\n                            <label class="checkbox"><input type="checkbox" name="remember" id="remember"/> <span data-weave="shared/helper/translation" data-i18n="Remember me"></span></label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="btm_b clearfix">\r\n                        <button class="btn btn-primary pull-right btn-login" data-weave="shared/helper/translation" data-i18n="Sign In"></button>\r\n                    </div>  \r\n                </form>\r\n            </div>\r\n                \r\n        </td>\r\n    </tr>\r\n</table>\r\n\r\n', c.length) {
			b += '\r\n<div class="friend-links">\r\n    <p>链接</p>\r\n    <p>\r\n        ';
			for (var d = 0, e = c.length; e > d; d++)
				b += '\r\n        <a href="' + c[d].value + '" target="_blank">' + c[d].name + "</a>\r\n        ";
			b += "\r\n    </p>\r\n</div>\r\n"
		}
		return b += '\r\n\r\n<div class="copyright">\r\n    <p>谷露招聘管理系统 &copy; 2012 - 2014 Gllue Software</p>\r\n    <p>软件著作权登记号 <a href="/copyright" data-action="open/window">2012SR131257</a></p>\r\n</div>'
	}
}), define("shared/widget/login/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "template!./main.html", "shared/helper/utils", "shared/helper/validate", "ladda", "jquery.cookie"], function (a, b, c, d, e, f) {
	function g(a) {
		var b = this;
		b.publish("ajax", {
			url : i.LINKS
		}, c().done(function (c) {
				b._json.links = c,
				b.html(d, b._json, a)
			}))
	}
	function h(b) {
		var d = this,
		e = d.$element.find("#email"),
		g = d.$element.find("#remember"),
		h = d.$element.find("#password"),
		j = d.$element.find(".btn-login");
		a.cookie("email") && (e.val(a.cookie("email")), g.prop("checked", !0)),
		f(a("#login_form"), {
			onkeyup : !1,
			errorClass : "error",
			validClass : "valid",
			rules : {
				email : {
					required : !0,
					minlength : 3
				},
				password : {
					required : !0,
					minlength : 3
				}
			},
			highlight : function (b) {
				a(b).closest("div").addClass("f_error")
			},
			unhighlight : function (b) {
				a(b).closest("div").removeClass("f_error")
			},
			errorPlacement : function (b, c) {
				a(c).closest("div").append(b)
			},
			submitHandler : function (b) {
				var f = a(b),
				k = e.val().trim(),
				l = h.val().trim(),
				m = g.prop("checked");
				return m ? a.cookie("email", k, {
					expires : 30
				}) : a.removeCookie("email"),
				d.publish("ajax", {
					url : i.LOGIN,
					data : {
						data : JSON.stringify({
							email : k,
							password : l,
							remember : m,
							next : window.location.search ? window.location.search.split("=")[1] + window.location.hash : ""
						})
					},
					type : "post"
				}, c().done(function (a) {
						a.status ? (f.find(".alert").addClass("hide"), window.location.href = a.data) : f.find(".alert").removeClass("hide")
					}), j),
				!1
			}
		}),
		b.resolve()
	}
	var i = {
		LINKS : "rest/data/links",
		LOGIN : "/rest/user/login"
	};
	return b.extend({
		"sig/initialize" : function (a, b) {
			localStorage.removeItem("tabs"),
			localStorage.removeItem("comet"),
			g.call(this, b)
		},
		"sig/start" : function (a, b) {
			h.call(this, b)
		},
		"dom/action.click" : a.noop,
		"dom/action/open/window.click" : function (b, c) {
			c.preventDefault();
			var d = a(c.target),
			f = d.attr("href");
			e.window({
				url : f,
				width : 727,
				height : 1e3
			})
		}
	})
}), define("shared/widget/modal/base", ["jquery", "troopjs-utils/deferred", "shared/widget/base/main"], function (a, b, c) {
	var d = "shared/widget/common/add-share",
	e = "shared/widget/common/comtree/main",
	f = "shared/widget/common/tagit/main",
	g = function (b) {
		var c = a(this);
		if (a(b.target).hasClass("modal") && c.find("form").length) {
			var g = c.find("form"),
			h = c.find('[data-woven*="' + d + '"]'),
			i = c.find('[data-woven*="' + e + '"]'),
			j = c.find('[data-woven*="' + f + '"]');
			g[0].reset(),
			a.isEmptyObject(g.data("validator")) || (g.find(".f_error").removeClass("f_error"), g.data("validator").resetForm()),
			i.each(function () {
				a(this).woven()[0].reset && a(this).woven()[0].reset()
			}),
			j.length && j.tagit("removeAll"),
			h.length && h.woven()[0].reRender()
		}
	};
	return c.extend({
		"sig/start" : function (a, b) {
			this.$element.on("hidden", g),
			b.resolve()
		},
		"hub/modal/unregister/cleanup" : function () {
			this.$element.off("hidden", g)
		},
		"hub/modal/register/cleanup" : function () {
			this.$element.on("hidden", g)
		},
		"dom/action/close.click" : function (a, b) {
			b.preventDefault();
			var c = this;
			c.$element.modal("hide")
		}
	})
}), define("troopjs-requirejs/template!shared/widget/modal/add-to-folder/edit-folder.html", [], function () {
	return function () {
		var a = '<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal">×</button>\n    <h3 data-weave="shared/helper/translation" data-i18n="Folder"></h3>\n</div>\n<div class="modal-body">\n    <form class="form-horizontal">\n    	<fieldset>\n    		<div class="control-group">\n    			<label class="control-label">\n    				<span data-weave="shared/helper/translation" data-i18n="Folder name"></span>\n    			</label>\n    			<div class="controls">\n    				<input type="text" class="input-medium required" name="name">\n    			</div>\n    		</div>\n\n            ';
		return "Linkedin" !== this.config.clientType && (a += '\n            <div class="control-group control-share"></div>\n            '),
		a += '\n    	</fieldset>\n    </form>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-danger btn-delete hide" data-action="save" data-weave="shared/helper/translation" data-i18n="Delete"></button>\n    <button class="btn btn-primary btn-confirm hide" data-action="save" data-weave="shared/helper/translation" data-i18n="Save"></button>\n</div>'
	}
}), define("shared/widget/modal/add-to-folder/edit-folder", ["jquery", "troopjs-utils/deferred", "shared/widget/modal/base", "template!./edit-folder.html", "shared/helper/utils", "shared/helper/validate", "config"], function (a, b, c, d, e, f, g) {
	function h(a) {
		var b = this;
		b.html(d, a)
	}
	function i(a) {
		var c = this,
		d = c.$element,
		e = d.find(".control-share");
		c.$form = d.find("form"),
		c.$name = d.find('[name="name"]'),
		c.$btnDelete = d.find(".btn-delete"),
		c.$btnConfirm = d.find(".btn-confirm"),
		f(c.$form),
		d.on("hidden", function () {
			c.$name.val(""),
			c._onSuccess && c._onSuccess(c._res)
		}),
		"Linkedin" !== c.config.clientType && e.attr("data-weave", "shared/widget/common/add-share/main").weave(b().done(function () {
				c.shareWidget = e.woven()[0]
			})),
		a.resolve()
	}
	var j,
	k = {
		ADD_FOLDER : "/rest/folder/add",
		DELETE_FOLDER : "/rest/folder/delete"
	};
	return c.extend({
		config : g,
		"sig/initialize" : function (a, b) {
			h.call(this, b)
		},
		"sig/start" : function (a, b) {
			i.call(this, b)
		},
		"hub/modal/add-to-folder/edit-folder/show" : function (a, b) {
			var c = this,
			d = c.$element;
			switch (c._res = null, c._type = b.type, c._node = b.node, c._operation = b.operation, c._share = b.share, c._onSuccess = b.onSuccess, c._operation) {
			case "new":
				c.$btnConfirm.removeClass("hide"),
				c.$btnDelete.addClass("hide"),
				"Linkedin" !== c.config.clientType && c.shareWidget.loadShare([]);
				break;
			case "updateNode":
				c.$name.val(c._node.name),
				c.$btnConfirm.removeClass("hide"),
				c.$btnDelete.addClass("hide"),
				"Linkedin" !== this.config.clientType && c.shareWidget.loadShare(c._node.share);
				break;
			case "appendNode":
				c.$btnConfirm.removeClass("hide"),
				c.$btnDelete.addClass("hide"),
				"Linkedin" !== c.config.clientType && c.shareWidget.loadShare(c._node.share);
				break;
			case "addNodeAfter":
				c.$btnConfirm.removeClass("hide"),
				c.$btnDelete.addClass("hide"),
				"Linkedin" !== c.config.clientType && c.shareWidget.loadShare([]);
				break;
			case "removeNode":
				c.$name.val(c._node.name),
				c.$btnConfirm.addClass("hide"),
				c.$btnDelete.removeClass("hide"),
				"Linkedin" !== c.config.clientType && c.shareWidget.loadShare(c._node.share)
			}
			d.modal("show")
		},
		"dom/action.click" : a.noop,
		"dom/action/save.click" : function (c, d) {
			d.preventDefault();
			var f,
			g = this,
			h = g.$name.val().trim(),
			i = k.ADD_FOLDER;
			if (g.$form.valid()) {
				var l = function () {
					var b = [];
					return "Linkedin" !== g.config.clientType && a('[name="share_with"]').each(function () {
						var c = a(this),
						d = c.val(),
						e = function () {
							var a;
							return c.next().find("select").length ? a = c.next().find("select").val() : c.next().find("input").length && (a = c.next().find("input").val()),
							a
						}
						();
						b.push({
							type : d,
							value : e
						})
					}),
					b
				}
				(),
				m = {
					external_type : g._type,
					name : h,
					share : l
				};
				switch (g._operation) {
				case "new":
					m.parent_id = null;
					break;
				case "updateNode":
					m.id = g._node.id,
					m.parent_id = g._node.parent_id;
					break;
				case "appendNode":
					m.parent_id = g._node.id;
					break;
				case "addNodeAfter":
					m.parent_id = g._node.parent_id;
					break;
				case "removeNode":
					m.id = g._node.id,
					i = k.DELETE_FOLDER,
					f = window.confirm("确定要删除该文件夹吗?")
				}
				(f === j || f) && g.publish("ajax", {
					url : i,
					type : "post",
					data : {
						data : JSON.stringify(m)
					}
				}, b().done(function (a) {
						g.$element.modal("hide"),
						a.status ? (g.publish("side-bar/update/folder"), e.alert("success", "文件夹编辑成功!"), g._res = {
								label : h,
								id : a.data,
								share : l
							}) : e.alert("error", a.message)
					}))
			}
		}
	})
}), define("troopjs-requirejs/template!shared/widget/modal/add-to-folder/main.html", [], function () {
	return function () {
		var a = '<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal">×</button>\n    <h3 class="add" data-weave="shared/helper/translation" data-i18n="Add to Folder"></h3>\n    <h3 class="edit" data-weave="shared/helper/translation" data-i18n="Edit folder"></h3>\n</div>\n<div class="modal-body" style="position: relative; height: 300px;">\n\n    <p>\n        <a href="#" data-action="add/folder" data-i18n="New Folder" data-weave="shared/helper/translation"></a>\n    </p>\n\n    <div class="folder-tree"></div>\n\n    <ul class="context-menu hide">\n        <li>\n            <a href="#" data-weave="shared/helper/translation" data-i18n="Edit folder" data-action="folder/action(\'updateNode\')"></a>\n        </li>\n        <li class="normal-action">\n            <a href="#" data-weave="shared/helper/translation" data-i18n="Add folder after this" data-action="folder/action(\'addNodeAfter\')"></a>\n        </li>\n        <li class="normal-action">\n            <a href="#" data-weave="shared/helper/translation" data-i18n="Add child folder" data-action="folder/action(\'appendNode\')"></a>\n        </li>\n        <li>\n            <a href="#" data-weave="shared/helper/translation" data-i18n="Delete folder" data-action="folder/action(\'removeNode\')"></a>\n        </li>\n    </ul>\n</div>\n<div class="modal-footer">\n    <span class="pull-left"><a href="http://support.gllue.com/?p=866" target="_blank" data-weave="shared/helper/translation" data-i18n="Tutorial"></a></span>\n    <button class="btn" data-action="close" data-weave="shared/helper/translation" data-i18n="Close"></button>\n    <button class="btn btn-primary add" data-action="save" data-weave="shared/helper/translation" data-i18n="Save"></button>\n</div>';
		return a
	}
}), define("shared/widget/modal/add-to-folder/main", ["jquery", "troopjs-utils/deferred", "shared/widget/modal/base", "template!./main.html", "shared/helper/utils", "jquery.tree"], function (a, b, c, d, e) {
	function f(a) {
		var b = this;
		b.html(d, a)
	}
	function g(c) {
		var d = this,
		f = d.$element;
		d.$body = f.find(".modal-body"),
		d.$add = f.find(".add"),
		d.$edit = f.find(".edit"),
		d.subscribe("update/" + d._type + "/folder", !0, function (c, f) {
			d._json = f,
			d._init ? d.$tree.tree("loadData", d._json) : (d.$tree = d.$element.find(".folder-tree"), d.$contextmenu = d.$element.find(".context-menu"), d.$tree.tree({
					data : d._json,
					onCreateLi : function (a, b) {
						var c = "icon-folder-close",
						e = b.find(".jqtree-title");
						"shared" === a.permission && (c += " icon-folder-share", e.after("<span class='muted pull-right'>创建者: <a href='/user/preview#" + a.user.id + "' data-action='profile/open'>" + a.user.englishName + "</a> (" + d.formatDate(a.dateAdded) + ")</span>")),
						e.before('<span class="' + c + '"></span>&nbsp;')
					},
					dragAndDrop : !0,
					onCanMove : function (a) {
						return "owned" === a.permission ? !0 : !1
					},
					onCanMoveTo : function (a, b, c) {
						return "owned" !== b.permission && "inside" === c ? !1 : !0
					}
				}), d.$tree.on("tree.contextmenu", function (b) {
					var c = b.node,
					e = a(b.target),
					f = e.offset(),
					g = b.click_event.pageX - f.left,
					h = b.click_event.pageY - f.top;
					"shared" === c.permission ? d.$contextmenu.find("li:not(.normal-action)").addClass("disabled") : d.$contextmenu.find("li").removeClass("disabled"),
					d.$contextmenu.css({
						left : g + 20,
						top : h + 50
					}).removeClass("hide"),
					d._selectedNode = c,
					a(document).on("click.contextmenu", function (b) {
						a(b.target).closest(d.$contextmenu).length || (d.$contextmenu.addClass("hide"), a(this).off(b))
					})
				}).on("tree.click", function (a) {
					if (d._edit)
						return !1;
					if (d._multiSelect) {
						a.preventDefault();
						var b = a.node;
						d.$tree.tree("isNodeSelected", b) ? d.$tree.tree("removeFromSelection", b) : d.$tree.tree("addToSelection", b)
					}
				}).on("tree.move", function (a) {
					var c = a.move_info.moved_node;
					c.parent_id = c.parent.id,
					d.DndTimer = setTimeout(function () {
							d.publish("ajax", {
								url : h.DND,
								type : "post",
								data : {
									data : d.$tree.tree("toJson")
								}
							}, b().done(function (a) {
									a.status ? d.publish("side-bar/update/folder") : e.alert("error", a.message)
								}))
						}, 500)
				}), d._init = !0)
		}),
		f.on("hidden", function () {
			if (!d._persist) {
				var a = d.$tree.tree("getSelectedNodes");
				a.forEach(function (a) {
					d.$tree.tree("removeFromSelection", a)
				})
			}
		}),
		c.resolve()
	}
	var h = {
		FOLDER_LIST : "/rest/folder/list?type=<type>",
		ADD_TO_FOLDER : "/rest/folder/addto",
		DND : "/rest/folder/dnd"
	},
	i = "modal/add-to-folder/edit-folder/show";
	return c.extend(function (a, b, c) {
		this._type = c,
		this._persist = !1
	}, {
		"sig/initialize" : function (a, b) {
			f.call(this, b)
		},
		"sig/start" : function (a, b) {
			g.call(this, b)
		},
		"hub/modal/add-to-folder/show" : function (a, b) {
			var c = this,
			d = c.$element;
			c._persist ? c._persist = !1 : "edit" === b ? (c._edit = !0, c.$add.addClass("hide"), c.$edit.removeClass("hide")) : (c._edit = !1, c.$add.removeClass("hide"), c.$edit.addClass("hide"), c._ids = b.ids, c._onSuccess = b.onSuccess, c._folders = b.folders, c._multiSelect = b.multiSelect, c._folders && c._folders.forEach(function (a) {
						if (a) {
							var b = c.$tree.tree("getNodeById", a);
							c.$tree.tree("addToSelection", b)
						}
					})),
			d.modal("show")
		},
		"dom/action.click" : a.noop,
		"dom/action/add/folder.click" : function (a, b) {
			b.preventDefault();
			var c = this;
			c.$element.modal("hide"),
			c._persist = !0,
			c.publish(i, {
				type : c._type,
				$tree : c.$tree,
				operation : "new",
				onSuccess : function () {
					c.publish("modal/add-to-folder/show")
				}
			})
		},
		"dom/action/folder/action.click" : function (b, c, d) {
			c.preventDefault();
			var e = this,
			f = a(c.target),
			g = e._selectedNode;
			f.closest("li").hasClass("disabled") || (e._persist = !0, e.$element.modal("hide"), e.$contextmenu.addClass("hide"), a(document).off("click.contextmenu"), e.publish(i, {
					type : e._type,
					$tree : e.$tree,
					node : g,
					operation : d,
					onSuccess : function (a) {
						e.publish("modal/add-to-folder/show"),
						a && ("updateNode" === d ? e.$tree.tree("updateNode", g, a.label) : "removeNode" === d ? e.$tree.tree(d, g) : e.$tree.tree(d, {
								label : a.label,
								id : a.id,
								share : a.share
							}, g))
					}
				}))
		},
		"dom/action/save.click" : function (c, d) {
			d.preventDefault();
			var f = this,
			g = f.$tree.tree("getSelectedNodes");
			f.$element;
			var i = a(d.target),
			j = [],
			k = [];
			!function () {
				g.forEach(function (a) {
					k.push(a.id),
					j.push({
						id : a.id,
						name : a.name
					})
				})
			}
			(),
			f.publish("ajax", {
				url : h.ADD_TO_FOLDER,
				data : {
					data : JSON.stringify({
						ids : k,
						external_ids : f._ids,
						justadd : f._ids.length > 1 ? !0 : !1,
						external_type : f._type
					})
				},
				type : "post"
			}, b().done(function (a) {
					f.$element.modal("hide"),
					a.status ? (f.publish("side-bar/update/folder"), f._onSuccess && f._onSuccess(j), e.alert("success", "加入文件夹成功!")) : e.alert("error", a.message)
				}), i)
		},
		"dom/action/profile/open.click" : function (b, c) {
			c.preventDefault();
			var d = a(c.target),
			f = d.attr("href");
			e.window({
				url : f,
				name : "User Profile",
				width : "1024"
			})
		}
	})
}), define("troopjs-requirejs/template!shared/widget/modal/authenticator/main.html", [], function () {
	return function () {
		var a = '<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal">×</button>\n    <h3>动态身份验证</h3>\n</div>\n<div class="modal-body">\n    <form>\n        <ol>\n            <li>\n                在移动设备上安装身份验证器\n            </li>\n            <li>\n                打开身份验证器应用，扫描条形码添加账户\n                <div class="goog-authenticator clearfix">\n                    <img class="barcode" width="100" height="100">\n\n                    <div>\n                        <p>\n                            身份验证器不能扫条码或加载做错误请输入，<br>\n                            请手动添加以下账号\n                        </p>\n                        <p>\n                            账户：<span class="username"></span>\n                        </p>\n                        <p>\n                            密钥：<span class="secretkey"></span>\n                        </p>\n\n                    </div>\n                </div>\n            </li>\n            <li>\n                输入身份证验证器自动生成的动态验证码<br>\n                <div class="goog-authentize">\n                    <p>\n                        <input type="text" class="input-medium" name="code">\n                        <button class="btn btn-primay" data-action="auth">验证并开启</button>\n                    </p>\n\n                </div>\n            </li>\n        </ol>\n    </form>\n</div>\n<div class="modal-footer">\n    <button class="btn" data-action="cancel" data-weave="shared/helper/translation" data-i18n="Close"></button>\n</div>';
		return a
	}
}), define("shared/widget/modal/authenticator/main", ["compose", "jquery", "troopjs-utils/deferred", "shared/widget/modal/base", "template!./main.html", "shared/helper/utils", "shared/helper/validate"], function (a, b, c, d, e, f, g) {
	function h(a) {
		var b = this,
		c = new Image;
		c.onload = function () {
			b.$barcode.attr("src", a)
		},
		c.onerror = function () {
			window.setTimeout(function () {
				h.call(b, a)
			}, 400)
		},
		c.src = a
	}
	function i(a) {
		var b = this;
		b.html(e, b._json, a)
	}
	function j(a) {
		var b = this;
		b.$form = b.$element.find("form"),
		b.$barcode = b.$form.find(".barcode"),
		b.$username = b.$form.find(".username"),
		b.$secretkey = b.$form.find(".secretkey"),
		b.$code = b.$form.find('[name="code"]'),
		g(b.$form, {
			rules : {
				code : {
					required : !0
				}
			}
		}),
		a.resolve()
	}
	var k = {
		REGISTER : "/rest/user/login/2step/register",
		UNREGISTER : "/rest/user/login/2step/unregistercheck",
		CHECK : "/rest/user/login/2step/registercheck?code="
	};
	return d.extend({
		"sig/initialize" : function (a, b) {
			i.call(this, b)
		},
		"sig/start" : function (a, b) {
			j.call(this, b)
		},
		"hub/modal/authenticator/show" : function () {
			var a = this,
			b = a.$element;
			a.publish("ajax", {
				url : k.REGISTER
			}, c().done(function (c) {
					if (c.status) {
						var d = c.data,
						e = d.barcode;
						e.substring(e.indexOf("otpauth")),
						h.call(a, e),
						a.$username.text(d.username),
						a.$secretkey.text(d.secretkey),
						b.modal("show")
					}
				}))
		},
		"dom/action.click" : b.noop,
		"dom/action/cancel.click" : function (a, b) {
			b.preventDefault();
			var c = this;
			c.$element.modal("hide")
		},
		"dom/action/auth.click" : function (a, b) {
			b.preventDefault();
			var d = this,
			e = d.$element;
			d.$form.valid() && (d.publish("ajax", {
					url : k.CHECK + d.$code.val().trim()
				}, c().done(function (a) {
						a.status || f.alert("error", a.message)
					})), e.modal("hide"))
		}
	})
}), define("troopjs-requirejs/template!shared/widget/modal/email-signature/main.html", [], function () {
	return function () {
		var a = '<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal">×</button>\n    <h3 data-weave="shared/helper/translation" data-i18n="Email Signature"></h3>\n</div>\n<div class="modal-body">\n\n    <form action="#" class="form-horizontal" id="email-signaure-form">\n\n        <textarea name="signature" data-signature="true" data-weave="shared/widget/common/ckeditor/main"></textarea>\n    </form>\n</div>\n<div class="modal-footer">\n    <button class="btn action" data-dismiss="modal" data-weave="shared/helper/translation" data-i18n="Cancel"></button>\n    <button class="btn btn-primary action" data-action="save" data-weave="shared/helper/translation" data-i18n="Save" form="email-signaure-form"></button>\n</div>';
		return a
	}
}), define("shared/widget/modal/email-signature/main", ["jquery", "troopjs-utils/deferred", "shared/widget/modal/base", "template!./main.html", "shared/helper/utils"], function (a, b, c, d, e) {
	function f(a) {
		var b = this;
		b.html(d, b._json, a)
	}
	function g(a) {
		var b = this;
		b.$textarea = b.$element.find("textarea"),
		a.resolve()
	}
	var h = {
		SIGNATURE_ADD : "/rest/data/userconfig/add"
	};
	return c.extend({
		"sig/initialize" : function (a, b) {
			f.call(this, b)
		},
		"sig/start" : function (a, b) {
			g.call(this, b)
		},
		"hub/modal/email-signature/show" : function () {
			var a = this,
			b = a.$element;
			b.modal("show")
		},
		"dom/action.click" : a.noop,
		"dom/action/save.click" : function (c, d) {
			d.preventDefault();
			var f = this,
			g = f.$element,
			i = a(d.target);
			f._json.id;
			var j = {
				emailSignature : CKEDITOR.instances[f.$textarea.attr("name")].getData()
			};
			f.publish("ajax", {
				url : h.SIGNATURE_ADD,
				data : {
					data : JSON.stringify(j)
				},
				type : "post"
			}, b().done(function (a) {
					g.modal("hide"),
					a.status ? e.alert("success", "Update email signature success.") : e.alert("error", a.message)
				}), i)
		}
	})
}), define("troopjs-requirejs/template!shared/widget/modal/feedback-quick-post/main.html", [], function () {
	return function () {
		var a = '<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal">×</button>\n    <h3 data-weave="shared/helper/translation" data-i18n="Feedback"></h3>\n</div>\n<div class="modal-body">\n\n    <form action="#" class="form-horizontal" id="feedback-quick-post-form">\n        <div class="control-group">\n            <label class="control-label">\n                <span data-weave="shared/helper/translation" data-i18n="Type"></span>\n                <span class="f_req">*</span>\n            </label>\n            <div class="controls">\n                <select name="type" class="input-medium required">\n                    <option value="" data-weave="shared/helper/translation" data-i18n="Please select"></option>\n                    <option value="support">系统支持</option>\n                    <option value="bug">系统缺陷</option>\n                    <option value="sugguestion">建议与意见</option>\n                    <option value="consulting">咨询服务</option>\n                </select>\n            </div>\n        </div>\n\n\n\n        <div class="control-group">\n            <label class="control-label">\n                <span data-weave="shared/helper/translation" data-i18n="Subject"></span>\n                <span class="f_req">*</span>\n            </label>\n            <div class="controls">\n                <input type="text" name="subject" class="span4 required">\n            </div>\n        </div>\n\n        <div class="control-group formSep">\n            <label class="control-label">\n                <span data-weave="shared/helper/translation" data-i18n="Content"></span>\n                <span class="f_req">*</span>\n            </label>\n            <div class="controls">\n                <textarea name="content" cols="30" rows="5" class="span4 required"></textarea>\n            </div>\n        </div>\n    </form>\n\n    <form action="#" class="form-horizontal" type="post" enctype="multipart/form-data">\n        <fieldset>\n            <div class="control-group">\n                <label class="control-label" data-weave="shared/helper/translation" data-i18n="Attachment"></label>\n                <div class="controls">\n                    <span class="upload-file"></span>\n                </div>\n                <div class="controls text_line hide">\n                    <ul class="unstyled attachment-list"></ul>\n                </div>\n            </div>\n        </fieldset>\n    </form>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" data-action="save" data-weave="shared/helper/translation" data-i18n="Send" form="feedback-quick-post-form"></button>\n</div>';
		return a
	}
}), define("troopjs-requirejs/template!shared/widget/modal/feedback-quick-post/attachment.html", [], function () {
	return function (a) {
		for (var b = "", c = 0, d = a.length; d > c; c++) {
			b += "\n";
			var e = a[c];
			b += '\n<li>\n    <span data-id="' + e.uuidname + '" class="attachment-item file-type-icon ' + e.ext.toLowerCase() + '">' + e.originname + '</span>\n    <a href="#" data-action="remove/attachment"><span class="icon-remove"></span></a>\n</li>\n'
		}
		return b
	}
}), define("shared/widget/modal/feedback-quick-post/main", ["jquery", "troopjs-utils/deferred", "shared/widget/modal/base", "template!./main.html", "template!./attachment.html", "shared/helper/utils", "shared/helper/validate"], function (a, b, c, d, e, f, g) {
	function h() {
		var b = this;
		b.$btnFile.data("json", {
			multiple : !0,
			data : {
				type : "other"
			},
			beforeSubmit : function () {
				b.$btnFile.prev().addClass("hide"),
				this.$controls = b.$btnFile.closest(".controls"),
				this.$controls.addClass("text_line")
			},
			success : function (c) {
				if (b.$btnFile.prev().removeClass("hide"), this.$controls.removeClass("text_line"), c.status) {
					var d = a(e(c.data));
					b.$attachmentList.append(d),
					b.$attachmentList.closest(".controls").removeClass("hide")
				} else
					f.alert("error", c.message)
			},
			error : function () {
				this.$controls.removeClass("text_line")
			}
		}).attr("data-weave", "shared/widget/common/upload/main(json)").weave()
	}
	function i(a) {
		var b = this;
		b.html(d, b._json, a)
	}
	function j(a) {
		var b = this,
		c = b.$element;
		b.$form = c.find("form"),
		b.$type = c.find('[name="type"]'),
		b.$subject = c.find('[name="subject"]'),
		b.$content = c.find('[name="content"]'),
		b.$btnFile = c.find(".upload-file"),
		b.$attachmentList = c.find(".attachment-list"),
		h.call(b),
		g(b.$form),
		c.on("hidden", function () {
			b.$attachmentList.empty(),
			b.$attachmentList.closest(".controls").addClass("hide")
		}),
		a.resolve()
	}
	var k = {
		ADD : "/rest/user/issue_add"
	};
	return c.extend({
		"sig/initialize" : function (a, b) {
			i.call(this, b)
		},
		"sig/start" : function (a, b) {
			j.call(this, b)
		},
		"hub/modal/feedback-quick-post/show" : function () {
			var a = this,
			b = a.$element;
			b.modal("show")
		},
		"dom/action.click" : a.noop,
		"dom/action/save.click" : function (c, d) {
			d.preventDefault();
			var e = this,
			g = e.$element,
			h = a(d.target);
			if (e.$form.valid()) {
				var i = function () {
					var b = [];
					return e.$element.find(".attachment-item").each(function () {
						b.push(a(this).data("id"))
					}),
					b
				}
				();
				e.publish("ajax", {
					url : k.ADD,
					data : {
						data : JSON.stringify({
							type : e.$type.val(),
							title : e.$subject.val().trim(),
							content : e.$content.val().trim(),
							attachments : i,
							status : "pending"
						})
					},
					type : "post"
				}, b().done(function (a) {
						g.modal("hide"),
						a.status ? f.alert("success", "反馈发送成功") : f.alert("error", a.message)
					}), h)
			}
		},
		"dom/action/remove/attachment.click" : function (b, c) {
			c.preventDefault();
			var d = a(c.target),
			e = window.confirm("确定要删除此附件吗?");
			e && (1 === d.closest(".controls").find("li").length && d.closest(".controls").addClass("hide"), d.closest("li").remove())
		}
	})
}), define("troopjs-requirejs/template!shared/widget/page-route/list.html", [], function () {
	return function (a) {
		var b = '<div class="search_page">\n    <div id="filter-container" class="well well-small" data-weave="' + a.app + "/widget/" + a.type + '/filter/main"></div>\n\n    <div data-weave="' + a.app + "/widget/" + a.type + '/list/main"></div>\n</div>\n    ';
		return b
	}
}), define("troopjs-requirejs/template!shared/widget/page-route/detail.html", [], function () {
	return function (a) {
		var b = '<div class="row-fluid widget-spin" data-weave="' + a.app + "/widget/" + a.type + '/detail/main"></div>';
		return b
	}
}), define("troopjs-requirejs/template!shared/widget/page-route/add.html", [], function () {
	return function (a) {
		var b = '<div class="row-fluid widget-spin" data-weave="' + a.app + "/widget/" + a.type + '/add/main"></div>';
		return b
	}
}), define("troopjs-requirejs/template!shared/widget/page-route/merge.html", [], function () {
	return function (a) {
		var b = '<div class="row-fluid widget-spin" data-weave="' + a.app + "/widget/" + a.type + '/merge/main"></div>';
		return b
	}
}), define("shared/widget/page-route/main", ["require", "jquery", "troopjs-core/component/widget", "troopjs-utils/deferred", "shared/services/route", "template!./list.html", "template!./detail.html", "template!./add.html", "template!./merge.html"], function (a, b, c, d, e) {
	function f(a) {
		var b = this,
		c = "",
		d = a.source;
		if (h.test(d))
			c = "list", "list" === d && b.publish(p);
		else if (i.test(d))
			c = "detail", b.publish(l, RegExp.$1);
		else if (j.test(d)) {
			c = "add";
			var e = d.split("!");
			/^id/.test(e[1]) ? (b.publish(m, e[1].split("=")[1]), b.publish("add/other/change", g)) : /^(id)|(file)|(company)/.test(e[1]) ? b.publish("add/other/change", e[1].split("=")[1]) : (b.publish(m, g), b.publish("add/other/change", g))
		} else {
			if (!k.test(d))
				return window.location.hash = "#list", void 0;
			c = "merge",
			b.publish(n, RegExp.$1)
		}
		return c
	}
	var g,
	h = /^list/,
	i = /^detail!id=(.+)/,
	j = /^add/,
	k = /^merge!id=(\d+)$/,
	l = "detail/id/change",
	m = "add/id/change",
	n = "merge/id/change",
	o = "service/route",
	p = "sidebar/set/default";
	return c.extend(function (a) {
		e().start(),
		this._app = b(a).data("app") || "app",
		this._currentType
	}, {
		"hub:memory/route" : function (a, b) {
			var c = this,
			d = f.call(c, b),
			e = window.location.pathname.substring(1).split("/");
			e.length > 1 ? (c._app = e[0], c._type = c._type || e[1]) : c._type = c._type || e[0],
			d && c.render(d),
			c.publish(o, b)
		},
		render : function (b) {
			var c = this;
			c._currentType !== b && (a(["template!./" + b + ".html"], function (a) {
					c.html(a, {
						type : c._type,
						app : c._app
					})
				}), c._currentType = b)
		}
	})
}), define("troopjs-requirejs/template!shared/widget/pagination/main.html", [], function () {
	return function (a) {
		var b = "",
		c = a.current,
		d = a.pages,
		e = a.count,
		f = 0;
		for (b += '\n\n<span class="summary pull-left">\n    <span data-weave="shared/helper/translation" data-i18n="Total"></span>: ' + this.formatCurrency(e) + ' <span data-weave="shared/helper/translation" data-i18n="results"></span>\n</span>\n\n<span class="pull-right">\n    <label class="muted">&nbsp;<span data-weave="shared/helper/translation" data-i18n="Goto"></span>\n        <input type="text" class="page" data-action="page/go/to">\n        <span data-weave="shared/helper/translation" data-i18n="Page"></span>\n    </label>\n</span>\n\n<ul class="paging pull-right clearfix">\n    <li ', 1 === c && (b += 'class="disabled"'), b += '>\n        <a href="#" data-action="page/number(' + (c - 1) + ')" data-weave="shared/helper/translation" data-i18n="Prev"></a>\n    </li>\n\n    ', c - 1 > 1 ? b += '\n    <li><a href="#" data-action="page/number(1)">1</a></li>\n    <li class="disabled"><a href="javascript:void(0);">...</a></li>\n    ' : 1 === c - 1 && (b += '\n    <li><a href="#" data-action="page/number(1)">1</a></li>\n    '), b += "\n\n\n    ", f; 3 > f; f++)
			b += "\n    ", d >= c + f && (b += "\n    <li ", c == c + f && (b += 'class="disabled"'), b += '>\n        <a href="#" data-action="page/number(' + (c + f) + ')">' + (c + f) + "</a>\n    </li>\n    "), b += "\n    ";
		return b += "\n\n    ",
		d - c > 3 ? b += '\n    <li class="disabled"><a href="javascript:void(0);">...</a></li>\n    <li><a href="#" data-action="page/number(' + d + ')">' + d + "</a></li>\n    " : 3 === d - c && (b += '\n    <li><a href="#" data-action="page/number(' + d + ')">' + d + "</a></li>\n    "),
		b += "\n\n\n    <li ",
		c === d && (b += 'class="disabled"'),
		b += '>\n        <a href="#" data-action="page/number(' + (c + 1) + ')" data-weave="shared/helper/translation" data-i18n="Next"></a>\n    </li>\n</ul>'
	}
}), define("shared/widget/pagination/main", ["jquery", "shared/widget/base/main", "troopjs-utils/uri", "troopjs-utils/deferred", "template!./main.html"], function (a, b, c, d, e) {
	function f(a) {
		var b = this;
		"load" === b._type ? b.publish(l, {
			page : a
		}) : b.publish(k, {
			page : a
		})
	}
	function g(a) {
		var b = this;
		a = a || d(),
		b._json.pages ? (a.done(function () {
				b.$element.removeClass("hide")
			}), b.html(e, b._json, a)) : a.resolve()
	}
	function h(a, b) {
		var c = this;
		b.pages ? (c.$element.removeClass("hide"), c._json = b, g.call(c)) : c.$element.addClass("hide")
	}
	var i = 13,
	j = 8,
	k = "make/route",
	l = "make/load";
	return b.extend(function (b, c, d, e) {
		var f = this;
		f._hub = d,
		f._type = e,
		f.subscribe(d + "/paging/set", !0, a.proxy(h, f))
	}, {
		"sig/initialize" : function (a, b) {
			g.call(this, b)
		},
		"sig/start" : function (a, b) {
			b.resolve()
		},
		"sig/stop" : function (b, c) {
			var d = this;
			d.subscribe(hub + "/paging/set", !0, a.proxy(h, d)),
			c.resolve()
		},
		"dom/action.click.keydown" : a.noop,
		"dom/action/page/number.click" : function (b, c, d) {
			c.preventDefault();
			var e = this,
			g = a(c.target);
			g.closest("li").hasClass("disabled") || f.call(e, d)
		},
		"dom/action/page/go/to.keydown" : function (b, c) {
			var d = this,
			e = a(c.target),
			g = c.originalEvent.which,
			h = e.val().trim();
			switch (g) {
			case i:
				h.length && f.call(d, h);
				break;
			case j:
				break;
			default:
				g >= 48 && 57 >= g || g >= 96 && 105 >= g || c.preventDefault()
			}
		}
	})
}), define("shared/widget/root/main", ["jquery", "troopjs-core/component/widget", "shared/services/load-context", "shared/services/comet", "troopjs-utils/deferred", "shared/helper/utils", "antiscroll", "jquery.actual"], function (a, b, c, d, e, f) {
	var g,
	h = null,
	i = {
		TASK_DONE : "/rest/todo/done"
	},
	j = {
		open : function () {
			a("body").removeClass("sidebar_hidden"),
			a(".sidebar_switch").addClass("icon-on-switch").show()
		},
		close : function () {
			a("body").addClass("sidebar_hidden"),
			a(".sidebar_switch").addClass("icon-off-switch")
		},
		init : function () {
			localStorage.getItem("sidebar") || localStorage.setItem("sidebar", "shown"),
			a(window).width() > 979 ? "hidden" === localStorage.getItem("sidebar") ? (a("body").addClass("sidebar_hidden"), a(".sidebar_switch").addClass("icon-off-switch")) : (a("body").removeClass("sidebar_hidden"), a(".sidebar_switch").addClass(" icon-on-switch")) : (a("body").addClass("sidebar_hidden"), a(".sidebar_switch").removeClass("icon-on-switch").addClass("icon-off-switch")),
			a(".sidebar_switch").tooltip({
				placement : "right",
				title : function () {
					return a(this).hasClass("icon-off-switch") ? "显示侧边栏" : "隐藏侧边栏"
				}
			}),
			j.info_box(),
			a(".sidebar_switch").on("click", function () {
				a(".sidebar_switch").removeClass("icon-on-switch icon-off-switch"),
				a("body").hasClass("sidebar_hidden") ? (localStorage.setItem("sidebar", "shown"), j.open()) : (localStorage.setItem("sidebar", "hidden"), j.close()),
				j.info_box(),
				j.update_scroll(),
				a(window).resize()
			}),
			a(".sidebar .accordion-toggle").click(function (a) {
				a.preventDefault()
			}),
			window.addEventListener("storage", function (b) {
				"sidebar" === b.key && (a(".sidebar_switch").removeClass("icon-on-switch icon-off-switch"), "shown" === b.newValue ? j.open() : "hidden" === b.newValue && j.close())
			})
		},
		info_box : function () {
			var b = a(".sidebar_info"),
			c = b.actual("height");
			b.css({
				height : c
			}),
			a(".push").height(c),
			a(".sidebar_inner").css({
				"margin-bottom" : "-" + c + "px",
				"min-height" : "100%"
			})
		},
		make_active : function () {
			var b = a("#side_accordion");
			b.find(".accordion-heading").removeClass("sdb_h_active");
			var c = b.find(".accordion-body.in").prev(".accordion-heading");
			c.length && c.addClass("sdb_h_active")
		},
		make_scroll : function () {
			g = a(".antiScroll").antiscroll({
					forceVertical : !1
				}).data("antiscroll")
		},
		update_scroll : function () {
			a(".antiScroll").length && (a(window).width() > 979 ? a(".antiscroll-inner,.antiscroll-content").height(a(window).height() - 40) : a(".antiscroll-inner,.antiscroll-content").height("400px"))
		}
	};
	return b.extend(function () {
		a(window).resize(function () {
			j.update_scroll()
		})
	}, {
		"sig/initialize" : function (a, b) {
			c().start(b)
		},
		"sig/stop" : function (a, b) {
			var c = this;
			clearTimeout(c.timeout),
			b.resolve()
		},
		"hub:memory/comet/msg" : function (b, c) {
			var d = this,
			g = c.data,
			h = (new Date).getTime();
			localStorage.setItem("notification", JSON.stringify(g)),
			localStorage.removeItem("notification");
			var j = a("<div id='sticky-" + h + "'></div>"),
			k = e();
			k.done(function () {
				f.alert("notifiy", j.get(0).outerHTML, !1);
				var b = a("#sticky-" + h);
				b.find(":checkbox").bind("click", function (c) {
					a(this);
					var g = a(c.target),
					h = g.val();
					g.prop("disabled", !0),
					d.publish("ajax", {
						url : i.TASK_DONE,
						data : {
							data : JSON.stringify({
								ids : [h],
								done : !0
							})
						},
						type : "POST"
					}, e().done(function (a) {
							a.status ? b.find(".st-close").trigger("click") : f.alert("error", a.message)
						}))
				})
			}),
			j.data("json", g).attr("data-weave", "app/widget/common/notification/main(json)").weave(k)
		},
		"hub:memory/context" : function (a, b) {
			var c = this;
			b && b.user && (h = d(), h.connect("/rest/user/msg", "msg")),
			c.$element.find("[data-weave]").weave()
		},
		"hub:memory/root/register/sidebar" : function () {
			j.init(),
			j.make_active(),
			j.make_scroll(),
			j.update_scroll()
		},
		"hub:memory/root/update/sidebar" : function () {
			j.update_scroll()
		}
	})
}), define("troopjs-requirejs/template!shared/widget/side-bar/admin/main.html", [], function () {
	return function (a) {
		var b = '<ul class="nav nav-list">\n    ',
		c = a.type;
		return b += "\n    ",
		"profile" === c ? (b += '\n    <li class="nav-header" >\n        <a href="#" data-action="nav/header">\n            <b class="icon-expandable"></b>\n            <span data-weave="shared/helper/translation" data-i18n="Personal Settings"></span>\n        </a>\n    </li>\n    ', "Linkedin" !== this.config.clientType && (b += '\n    <li><a href="/my/profile" data-weave="shared/helper/translation" data-i18n="User Profile"></a></li>\n    '), b += '\n    <li><a href="/password" data-weave="shared/helper/translation" data-i18n="System Password"></a></li>\n    ', "Linkedin" !== this.config.clientType && (b += '\n    <li><a href="/email" data-weave="shared/helper/translation" data-i18n="Email Setting"></a></li>\n    <li><a href="/personal-email-template" data-weave="shared/helper/translation" data-i18n="Email Template Setting"></a></li>\n    '), b += '\n    <li><a href="/preference" data-weave="shared/helper/translation" data-i18n="System Language"></a></li>\n    <li><a href="/bind/oauth" data-weave="shared/helper/translation" data-i18n="Authorize SNS"></a></li>\n    ') : "userManagement" === c ? b += '\n    <li class="nav-header">\n        <a href="#" data-action="nav/header">\n            <b class="icon-expandable"></b>\n            <span data-weave="shared/helper/translation" data-i18n="User Management"></span>\n        </a>\n    </li>\n    <li><a href="/user" data-weave="shared/helper/translation" data-i18n="User Profile"></a></li>\n    ' : "admin" === c ? b += '\n    <li class="nav-header">\n        <a href="#" data-action="nav/header">\n            <b class="icon-expandable"></b>\n            <span data-weave="shared/helper/translation" data-i18n="System Management"></span>\n        </a>\n    </li>\n    <li><a href="/setting#type=company-info" data-weave="shared/helper/translation" data-i18n="公司信息设置"></a></li>\n    <li><a href="/setting#type=core-config" data-weave="shared/helper/translation" data-i18n="核心参数设置"></a></li>\n    <li><a href="/setting#type=email-config" data-weave="shared/helper/translation" data-i18n="邮件: 服务器设置"></a></li>\n    <li><a href="/setting#type=email-template-config" data-weave="shared/helper/translation" data-i18n="邮件: 模板设置"></a></li>\n    <li><a href="/setting#type=people-note-config" data-weave="shared/helper/translation" data-i18n="人才: 备注类型设置"></a></li>\n    <li><a href="/setting#type=people-status-config" data-weave="shared/helper/translation" data-i18n="人才: 备注状态设置"></a></li>\n    <li><a href="/setting#type=candidate-fields" data-weave="shared/helper/translation" data-i18n="人才: 新增字段"></a></li>\n    <li><a href="/setting#type=education-background" data-weave="shared/helper/translation" data-i18n="人才: 学历设置"></a></li>\n    <li><a href="/setting#type=candidate-required-fields" data-weave="shared/helper/translation" data-i18n="人才: 必填字段设置"></a></li>\n    <li><a href="/setting#type=task-category-config" data-weave="shared/helper/translation" data-i18n="任务: 类型设置"></a></li>\n    <li><a href="/setting#type=company-fields" data-weave="shared/helper/translation" data-i18n="公司: 新增字段"></a></li>\n    <li><a href="/setting#type=company-note-config" data-weave="shared/helper/translation" data-i18n="公司: 备注类型设置"></a></li>\n    <li><a href="/setting#type=valid-new-company" data-weave="shared/helper/translation" data-i18n="公司: 客户审核设置"></a></li>\n    <li><a href="/setting#type=joborder-fields" data-weave="shared/helper/translation" data-i18n="项目: 新增字段"></a></li>\n    <li><a href="/setting#type=job-note-config" data-weave="shared/helper/translation" data-i18n=" 项目: 备注类型设置"></a></li>\n    <li><a href="/setting#type=jobsubmission-note-config" data-weave="shared/helper/translation" data-i18n="项目流程: 备注类型设置"></a></li>\n    <li><a href="/setting#type=jobsubmission-note-status" data-weave="shared/helper/translation" data-i18n="项目流程: 备注状态设置"></a></li>\n    <li><a href="/setting#type=revenue-invalid-config" data-weave="shared/helper/translation" data-i18n="项目流程: 业绩作废原因设置"></a></li>\n    <li><a href="/setting#type=document-permission" data-weave="shared/helper/translation" data-i18n="文档: 权限设置"></a></li>\n    <li><a href="/setting#type=attachment-type" data-weave="shared/helper/translation" data-i18n="附件: 类型设置"></a></li>\n    <li><a href="/setting#type=license" data-weave="shared/helper/translation" data-i18n="License Management"></a></li>\n    ' : "extension" === c ? b += '\n    <li class="nav-header">\n        <a href="#" data-action="nav/header">\n            <b class="icon-expandable"></b>\n            <span data-weave="shared/helper/translation" data-i18n="System Plugins"></span>\n        </a>\n    </li>\n    <li><a href="#">全部插件</a></li>\n    <li><a href="#">已启用插件</a></li>\n    <li><a href="#">未启用插件</a></li>\n    ' : "security" === c && (b += '\n    <li class="nav-header">\n        <a href="#" data-action="nav/header">\n            <b class="icon-expandable"></b>\n            <span data-weave="shared/helper/translation" data-i18n="Security Center"></span>\n        </a>\n    </li>\n    <li><a href="/login/log" data-weave="shared/helper/translation" data-i18n="Login Log"></a></li>\n    <li><a href="/user/activity" data-weave="shared/helper/translation" data-i18n="User Activity"></a></li>\n    <li><a href="/ip/privacy" data-weave="shared/helper/translation" data-i18n="用户IP访问限制"></a></li>\n    <li><a href="/anti/duplication" data-weave="shared/helper/translation" data-i18n="数据防复制"></a></li>\n    <li><a href="/invoice/email" data-weave="shared/helper/translation" data-i18n="财务信息邮件通知"></a></li>\n    '),
		b += "\n</ul>"
	}
}), define("shared/widget/side-bar/admin/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils", "template!./main.html", "config"], function (a, b, c, d, e, f) {
	function g() {
		var a = this;
		c(function (b) {
			a.html(e, a._json, b)
		}).done(function () {
			h.call(a)
		})
	}
	function h() {
		var a = this;
		a._json.type;
		var b = window.location.pathname + window.location.hash;
		a.$element.removeClass("hide").find('[href*="' + b + '"]').closest("li").addClass("hover")
	}
	return b.extend(function (a, b, c) {
		var d = this;
		d._json.type = c
	}, {
		config : f,
		"hub:memory/context" : function (a, b) {
			var c = this;
			c._json.user = b.user,
			g.call(c)
		},
		"hub:memory/route" : function (a, b) {
			var c = this;
			"/setting" === window.location.pathname && (c.$element.find("li").removeClass("hover"), c.$element.find('[href*="' + b.path + '"]').closest("li").addClass("hover"))
		}
	})
}), define("troopjs-requirejs/template!shared/widget/side-bar/main.html", [], function () {
	return function () {
		var a = '<span class="sidebar_switch"></span>\n<div class="sidebar">\n    <div class="antiScroll">\n        <div class="antiscroll-inner">\n            <div class="antiscroll-content">\n                <div class="sidebar_inner hide">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>';
		return a
	}
}), define("shared/widget/side-bar/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "template!./main.html", "shared/helper/utils"], function (a, b, c, d, e) {
	function f(a, b) {
		function c(a, e) {
			b && e && b(e),
			d.unsubscribe(j, c)
		}
		var d = this;
		d.subscribe(j, c),
		d.publish("make/route", {
			filter : a,
			page : 1
		})
	}
	function g(a) {
		var b = this;
		c(function (a) {
			b.html(d, b._json, a)
		}).done(function () {
			h.call(b, a)
		})
	}
	function h(a) {
		var b = this,
		c = b._type;
		switch (c) {
		case "profile":
		case "admin":
		case "extension":
		case "security":
		case "security":
			b.$element.find(".sidebar_inner").attr("data-weave", 'shared/widget/side-bar/admin/main("' + c + '")').weave();
			break;
		case "linkedin":
		case "linkedin_company":
			b.$element.find(".sidebar_inner").attr("data-weave", 'shared/widget/gllue/sidebar/main("' + c + '")').weave();
			break;
		default:
			b.$element.find(".sidebar_inner").attr("data-weave", 'shared/widget/side-bar/saved-filter/main("' + c + '")').weave()
		}
		a.resolve()
	}
	var i = {
		QUERY_FILTER : "/rest/data/queryfilter/<type>",
		DELETE_FILTER : "/rest/data/queryfilter/<type>/del",
		FOLDER_LIST : "/rest/folder/list?type=<type>",
		DELETE_FOLDER : "/rest/folder/delete",
		REORDER : "/rest/data/reorder",
		LISTVIEW : "/rest/user/listview"
	},
	j = "filter/get/count",
	k = "root/update/sidebar";
	return b.extend(function (a, b, c) {
		var d = this;
		d._type = c
	}, {
		"sig/initialize" : function (a, b) {
			g.call(this, b)
		},
		"sig/start" : function (a, b) {
			var c = this;
			c.publish("root/register/sidebar"),
			b.resolve()
		},
		"dom/action.click" : a.noop,
		"dom/action/nav/header.click" : function (b, c) {
			c.preventDefault();
			var d = a(c.target);
			d.closest(".nav-list").toggleClass("nav-hidden")
		},
		"dom/action/filter.click" : function (b, c) {
			c.preventDefault();
			var d = this,
			e = a(c.target),
			g = e.attr("data-href");
			a(window).width() < 980 && d.$element.find(".sidebar_switch").trigger("click"),
			d.$element.find("li").removeClass("hover"),
			e.closest("li").addClass("hover"),
			f.call(d, g, function (a) {
				e.find(".pull-right").text(a)
			})
		},
		"dom/action/filter/delete.click" : function (b, d) {
			var f = this,
			g = a(d.target),
			h = window.confirm("确认删除此订阅搜索吗?"),
			j = {
				id : g.attr("data-id")
			};
			h && f.publish("ajax", {
				url : i.DELETE_FILTER.replace("<type>", f._type),
				type : "post",
				data : {
					data : JSON.stringify(j)
				}
			}, c().done(function (a) {
					a.status ? (e.alert("success", "订阅搜索删除成功!"), g.closest("li").remove(), f.publish(k)) : e.alert("error", "Delete filter error: " + a.data || a.message)
				}))
		},
		"dom/action/folder/delete.click" : function (b, d) {
			var f = this,
			g = a(d.target),
			h = g.data("id"),
			j = window.confirm("确认删除此文件夹吗?");
			j && f.publish("ajax", {
				url : i.DELETE_FOLDER,
				data : {
					data : JSON.stringify({
						id : h
					})
				},
				type : "post"
			}, c().done(function (a) {
					a.status ? (e.alert("success", "文件夹删除成功!"), g.closest("li").remove()) : e.alert("error", a.message)
				}))
		},
		"dom/action/edit/folder.click" : function (a, b) {
			b.preventDefault(),
			b.stopPropagation();
			var c = this;
			c.publish("modal/add-to-folder/show", "edit")
		}
	})
}), define("troopjs-requirejs/template!shared/widget/side-bar/saved-filter/main.html", [], function () {
	return function (a) {
		var b = "",
		c = a.savedFilters;
		if (b += "\n", "document" !== this._type) {
			if (b += '\n<ul class="nav nav-list saved-filter" data-name="favorite-filter">\n    <li class="nav-header" id="saved-searchs">\n        <a href="#" data-action="nav/header">\n            <b class="icon-expandable"></b>\n            <span data-weave="shared/helper/translation" data-i18n="Saved Searches"></span>\n        </a>\n    </li>\n    ', c) {
				b += "\n    ";
				for (var d = 0, e = c.length; e > d; d++)
					b += '\n    <li class="nav-filter">\n        <span class="icon-remove-small icon-transparent" data-action="filter/delete" data-filter="' + c[d].name + '" data-id="' + c[d].id + '"></span>\n        <a  href="#" data-href="' + c[d].query + "&byfilter=" + c[d].id + '" data-action="filter" data-id="' + c[d].id + '" class="search-item"><i class="icon-search icon-blue"></i> ' + c[d].name + '<sapn class="pull-right">' + c[d].count + '</sapn></a>\n        <span class="icon-move-ns icon-blue"></span>\n    </li>\n    ';
				b += "\n    "
			}
			b += "\n</ul>\n"
		}
		return b += "\n\n",
		("candidate" === this._type || "client" === this._type || "document" === this._type) && (b += '\n<ul class="nav nav-list folder-list" data-action="folder/list" data-name="folder-list">\n    <li class="nav-header">\n        <a href="#" data-action="nav/header">\n            <b class="icon-expandable"></b>\n            <span data-weave="shared/helper/translation" data-i18n="Folder"></span>\n            <span class="edit hide" data-weave="shared/helper/translation" data-i18n="Edit" data-action="edit/folder"></span>\n        </a>\n    </li>\n    <li class="folder-tree">\n    </li>\n</ul>\n'),
		b
	}
}), define("troopjs-requirejs/template!shared/widget/side-bar/saved-filter/saved-filter.html", [], function () {
	return function (a) {
		var b = '<li class="nav-filter">\n	<span class="icon-remove-small icon-transparent hide" data-action="filter/delete" data-filter="' + a.name + '" data-id="' + a.id + '"></span>\n	<a href="#" data-href="' + a.query + "&byfilter=" + a.id + '" data-action="filter" data-id="' + a.id + '" class="search-item"><i class="icon-search icon-blue"></i> ' + a.name + '<sapn class="pull-right">' + a.count + '</sapn></a>\n	<span class="icon-move-ns icon-blue"></span>\n</li>';
		return b
	}
}), define("shared/widget/side-bar/saved-filter/main", ["jquery", "config", "shared/widget/base/main", "troopjs-utils/deferred", "troopjs-utils/when", "shared/helper/utils", "template!./main.html", "template!./saved-filter.html", "shared/helper/blurb", "jquery.ui", "jquery.tree"], function (a, b, c, d, e, f, g, h, i) {
	function j() {
		var a,
		b,
		c,
		d = this,
		e = d._path,
		f = 0;
		if (e)
			for (a = e.length, f; a > f; f++)
				p.test(e[f]) && (b = e[f].split("!"), c = b[1], d.$element.find("li").removeClass("hover"), d.$element.find('[data-href="' + window.decodeURIComponent(c) + '"]').closest("li").addClass("hover"))
	}
	function k(a) {
		var b = this;
		b.publish("ajax", {
			url : n.FOLDER_LIST.replace("<type>", b._type)
		}, d().done(function (c) {
				b.$folderList.find(".folder-tree").tree("loadData", c),
				b.publish("update/" + b._type + "/folder", c),
				b._folderLoaded || j.call(b),
				b._folderLoaded = !0,
				b.publish(q),
				a && a.resolve()
			}))
	}
	function l(a) {
		var b = this;
		b._type ? (b._type = "task" === b._type ? "todo" : b._type, b.publish("ajax", {
				url : n.QUERY_FILTER.replace("<type>", b._type)
			}, d().done(function (c) {
					b._json.savedFilters = c,
					d(function (a) {
						b.html(g, b._json, a)
					}).done(function () {
						b.sidebarConfig.forEach(function (a) {
							b.$element.append(b.$element.find('[data-name="' + a + '"]'))
						}),
						b.$element.removeClass("hide"),
						d(function (a) {
							m.call(b, a)
						}).done(function () {
							"candidate" === b._type || "client" === b._type || "document" === b._type ? k.call(b, a) : a.resolve()
						})
					})
				}))) : a.resolve()
	}
	function m(b) {
		var c = this;
		c.$folderList = c.$element.find(".folder-list"),
		c.$element.on("mouseenter mouseleave", ".folder-list", function (a) {
			"mouseenter" === a.type ? c.$element.find(".edit").removeClass("hide") : c.$element.find(".edit").addClass("hide")
		}),
		c.$folderList.find(".folder-tree").tree({
			data : {},
			onCreateLi : function (a, b) {
				var c = b.find(".jqtree-title"),
				d = "icon-folder-close icon-blue";
				"shared" === a.permission && (d += " icon-folder-share"),
				c.before('<i class="' + d + '"></i>&nbsp;'),
				c.after('<sapn class="pull-right">' + a.count + "</sapn>"),
				b.find(".jqtree-element").attr("data-action", "filter").attr("data-id", a.id).attr("data-href", "folder_id=" + a.id)
			},
			selectable : !1,
			slide : !1
		}),
		c.publish(q),
		c.$element.find(".saved-filter, .favorite-filter").sortable({
			axis : "y",
			handle : ".icon-move-ns",
			items : "li:not(.nav-header)",
			placeholder : "sortable-placeholder",
			forcePlaceholderSize : !0,
			update : function () {
				var b = [];
				a(this).find("a[data-id]").each(function () {
					b.push(a(this).data("id"))
				}),
				c.publish("ajax", {
					url : n.REORDER,
					data : {
						data : JSON.stringify({
							type : "queryfilter",
							ids : b
						})
					},
					type : "post"
				}, d().done(function (a) {
						a.status ? f.alert("success", o.SUCCESSFUL) : f.alert("success", a.message)
					}))
			}
		}),
		c.$element.sortable({
			axis : "y",
			handle : ".nav-header",
			items : "ul.nav-list",
			placeholder : "sortable-placeholder",
			forcePlaceholderSize : !0,
			update : function () {
				var b = [];
				a(this).find("ul[data-name]").each(function () {
					b.push(a(this).data("name"))
				}),
				c.publish("ajax", {
					url : n.LISTVIEW,
					data : {
						data : JSON.stringify({
							list : c._type,
							key : "sidebar",
							value : b
						})
					},
					type : "post"
				}, d().done(function (a) {
						a.status || f.alert("error", a.message)
					}))
			}
		}),
		b.resolve()
	}
	var n = {
		QUERY_FILTER : "/rest/data/queryfilter/<type>",
		DELETE_FILTER : "/rest/data/queryfilter/<type>/del",
		FOLDER_LIST : "/rest/folder/list?type=<type>",
		DELETE_FOLDER : "/rest/folder/delete",
		REORDER : "/rest/data/reorder",
		LISTVIEW : "/rest/user/listview"
	},
	o = {
		SUCCESSFUL : i.t("Operate successfully")
	},
	p = /^filter!/,
	q = "root/update/sidebar";
	return c.extend(function (a, c, d) {
		this._type = d,
		this.sidebarConfig = [],
		b.userContext.user.listview[d] && b.userContext.user.listview[d].sidebar && (this.sidebarConfig = b.userContext.user.listview[d].sidebar)
	}, {
		"sig/initialize" : function (a, b) {
			l.call(this, b)
		},
		"hub:memory/side-bar/update/folder" : function () {
			k.call(this)
		},
		"hub:memory/route" : function (a, b) {
			var c = this;
			c._path = b.path,
			j.call(c)
		},
		"hub:memory/sidebar/set/default" : function () {
			var a = this,
			b = a.$element.find("[data-href]:eq(0)");
			b.trigger("click")
		},
		"hub/saved/filter/add" : function (b, c) {
			var d = this,
			e = d.$element.find(".search-item");
			e.length ? e.eq(e.length - 1).parent().after(h(c)) : a("#saved-searchs").after(h(c)),
			d.$element.find(".search-item").last().trigger("click"),
			d.publish(q)
		}
	})
}), define("troopjs-requirejs/template!shared/widget/support-center/detail/main.html", [], function () {
	return function (a) {
		var b = "",
		c = a.items,
		d = a.email;
		b += '\n<p class="clearfix">\n    <a href="javascript:history.back();" class="btn pull-right">\n        <i class="icon-arrow-left"></i>\n    </a>\n</p>\n\n<div class="chat_box">\n    <div class="chat_content">\n        <div class="chat_heading clearfix">\n            ' + a.title + " - " + this.showStatus(a.status) + '\n        </div>\n        \n        <div class="msg_window">\n            <ul class="unstyled bubble-wrap">\n                ';
		for (var e = 0, f = c.length; f > e; e++) {
			b += "\n                ";
			var g = c[e];
			b += '\n                <li>\n                    <div class="bubble-main ',
			b += g.email === d ? "pull-right" : "pull-left",
			b += '">\n                        <p class="bubble-content">\n                            ' + (g.content.replace("\r\n", "<br>").replace("\n", "<br>") || "&nbsp;") + "\n                            <br>\n                            ";
			for (var h = 0, i = g.attachments.length; i > h; h++)
				b += '\n                            <a href="/rest/user/issue_attachment_download?_id=' + a._id + "&uuidname=" + g.attachments[h].uuidname + '" target="_blank">' + g.attachments[h].originname + "</a>\n                            ";
			b += '\n                        </p>\n                    </div>\n                    <span class="tips ',
			b += g.email === d ? "pull-right" : "pull-left",
			b += '">' + g.date + "</span>\n                </li>\n                "
		}
		return b += '               \n            </ul>\n        </div>\n        \n        <div class="chat_editor_box clearfix">\n            <textarea name="content" data-action="content" data-weave="shared/widget/common/autosize/main"></textarea>\n\n            <div class="clearfix">\n                <ul class="unstyled attachment-list"></ul>\n                <form action="#" class="form-horizontal" type="post" enctype="multipart/form-data">\n                    <fieldset>\n                        <span class="upload-file"></span>\n                        <button class="btn btn-primary btn-send disabled pull-right" data-action="send" data-weave="shared/helper/translation" data-i18n="Send"></button>\n                    </fieldset>\n                </form>\n            </div>\n        </div>\n    </div>\n</div>'
	}
}), define("troopjs-requirejs/template!shared/widget/support-center/detail/attachment.html", [], function () {
	return function (a) {
		for (var b = "", c = 0, d = a.length; d > c; c++) {
			b += "\n";
			var e = a[c];
			b += '\n<li>\n    <span data-id="' + e.uuidname + '" class="attachment-item file-type-icon ' + e.ext.toLowerCase() + '">' + e.originname + '</span>\n    <a href="#" data-action="remove/attachment"><span class="icon-remove"></span></a>\n</li>\n'
		}
		return b
	}
}), define("troopjs-requirejs/template!shared/widget/support-center/detail/new-message.html", [], function () {
	return function (a) {
		for (var b = '<li class="hide">\n    <div class="bubble-main pull-right">\n        <p class="bubble-content">\n        	' + (a.content || "&nbsp;") + "\n        	<br>\n        	", c = 0, d = a.attachments.length; d > c; c++)
			b += '\n            <a href="/rest/user/issue_attachment_download?_id=' + a._id + "&uuidname=" + a.attachments[c].uuidname + '" target="_blank">' + a.attachments[c].originname + "</a>\n            ";
		return b += '\n        </p>\n    </div>\n    <span class="tips pull-right" data-weave="shared/helper/translation" data-i18n="Just now"></span>\n</li>'
	}
}), define("shared/widget/support-center/detail/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils", "template!./main.html", "template!./attachment.html", "template!./new-message.html"], function (a, b, c, d, e, f, g) {
	function h() {
		var b = this;
		b.$btnFile.data("json", {
			multiple : !0,
			data : {
				type : "other"
			},
			beforeSubmit : function () {
				b.$btnFile.prev().addClass("hide"),
				this.$controls = b.$btnFile.closest(".controls"),
				this.$controls.addClass("text_line")
			},
			success : function (c) {
				if (b.$btnFile.prev().removeClass("hide"), this.$controls.removeClass("text_line"), c.status) {
					var e = a(f(c.data));
					b.$attachmentList.append(e),
					b.$attachmentList.closest(".controls").removeClass("hide")
				} else
					d.alert("error", c.message)
			},
			error : function () {
				this.$controls.removeClass("text_line")
			}
		}).attr("data-weave", "shared/widget/common/upload/main(json)").weave()
	}
	function i() {
		var a = this;
		a.publish("ajax", {
			url : k.DETAIL.replace("<id>", a._id)
		}, c().done(function (b) {
				a._json = b.list[0],
				a.html(e, a._json, c().done(function () {
						j.call(a)
					}))
			}))
	}
	function j() {
		var a = this,
		b = a.$element;
		a.$content = b.find('[name="content"]'),
		a.$wrap = b.find(".bubble-wrap"),
		a.$btn = b.find(".btn-send"),
		a.$btnFile = b.find(".upload-file"),
		a.$attachmentList = b.find(".attachment-list"),
		h.call(a),
		d.widgetLoaded.call(a)
	}
	var k = {
		DETAIL : "/rest/user/issue_list?_id=<id>",
		ADD : "/rest/user/issue_add"
	},
	l = {
		pending : "等待处理",
		processing : "处理中",
		done : "已处理"
	};
	return b.extend({
		"hub:memory/detail/id/change" : function (a, b) {
			var c = this;
			c._id = b,
			i.call(c)
		},
		"dom/action.click.input" : a.noop,
		"dom/action/content.input" : function (b, c) {
			var d = this,
			e = a(c.target);
			e.val().trim().length ? d.$btn.removeClass("disabled") : d.$btn.addClass("disabled")
		},
		"dom/action/send.click" : function (b, e) {
			e.preventDefault();
			var f = this,
			h = a(e.target),
			i = f.$content.val().trim(),
			j = [],
			l = [];
			f.$element.find(".attachment-item").each(function () {
				l.push(a(this).data("id")),
				j.push({
					uuidname : a(this).data("id"),
					originname : a(this).text()
				})
			}),
			f.publish("ajax", {
				url : k.ADD,
				data : {
					data : JSON.stringify({
						_id : f._id,
						content : i,
						attachments : l
					})
				},
				type : "post"
			}, c().done(function (b) {
					if (b.status) {
						var e = a(g({
									content : i,
									attachments : j
								}));
						f.$attachmentList.empty(),
						e.find("[data-weave]").weave(c().done(function () {
								f.$wrap.append(e),
								e.fadeIn()
							})),
						f.$content.val(""),
						d.alert("success", "发送成功！")
					} else
						d.alert("error", b.message)
				}), h)
		},
		showStatus : function (a) {
			return a ? l[a] : l.pending
		}
	})
}), define("troopjs-requirejs/template!shared/widget/support-center/filter/main.html", [], function () {
	return function () {
		var a = '<ul class="nav nav-pills line_sep">\n    <li class="dropdown">\n        <a href="#" data-action="dropdown" data-weave="shared/helper/translation" data-i18n="Subject"></a>\n\n        <div class="dropdown-menu filter-content">\n            <form action="#" class="form-horizontal">\n                <div class="control-group">\n                    <input type="text" class="input-medium" autocomplete="off">\n                </div>\n                <button class="btn" type="submit" data-action="form(\'title\')" data-weave="shared/helper/translation" data-i18n="Add"></button>\n            </form>\n        </div>\n    </li>\n    <li class="divider"></li>\n    <li class="dropdown">\n        <a href="#" data-action="dropdown" data-weave="shared/helper/translation" data-i18n="Feedback Type"></a>\n\n        <div class="dropdown-menu filter-content">\n            <form action="#" class="form-horizontal">\n                <div class="control-group">\n                    <select name="type" class="input-large">\n                        <option value="support">系统支持</option>\n                        <option value="bug">系统缺陷</option>\n                        <option value="sugguestion">建议与意见</option>\n                        <option value="consulting">咨询服务</option>\n                    </select>\n                </div>\n                <button class="btn" type="submit" data-action="form(\'type\')" data-weave="shared/helper/translation" data-i18n="Add"></button>\n            </form>\n        </div>\n    </li>\n    <li class="divider"></li>\n    <li class="dropdown">\n        <a href="#" data-action="dropdown" data-weave="shared/helper/translation" data-i18n="Status"></a>\n\n        <div class="dropdown-menu filter-content">\n            <form action="#" class="form-horizontal">\n                <div class="control-group">\n                    <select name="status" class="input-large">\n                        <option value="pending">等待处理</option>\n                        <option value="processing">处理中</option>\n                        <option value="done">已处理</option>\n                    </select>\n                </div>\n                <button class="btn" type="submit" data-action="form(\'status\')" data-weave="shared/helper/translation" data-i18n="Add"></button>\n            </form>\n        </div>\n    </li>\n</ul>\n\n<p class="sepH_b">\n    <span class="tag label label-info deletable hide" data-query="title" data-action="tag/remove"><b data-weave="shared/helper/translation" data-i18n="Subject"></b>: <span></span> <i class="icon-remove-small icon-transparent"></i></span>\n    <span class="tag label label-info deletable hide" data-query="type" data-action="tag/remove"><b data-weave="shared/helper/translation" data-i18n="Feedback Type"></b>: <span></span> <i class="icon-remove-small icon-transparent"></i></span>\n    <span class="tag label label-info deletable hide" data-query="status" data-action="tag/remove"><b data-weave="shared/helper/translation" data-i18n="Status"></b>: <span></span> <i class="icon-remove-small icon-transparent"></i></span>\n    <span class="tag label label-info deletable hide" data-query="date" data-action="tag/remove"><b data-weave="shared/helper/translation" data-i18n="Added Date"></b>: <span></span> <i class="icon-remove-small icon-transparent"></i></span>\n</p>\n\n<p class="sepH_b">\n    <button class="btn" data-action="filter/search" data-weave="shared/helper/translation" data-i18n="Search"></button>\n</p>';
		return a
	}
}), define("shared/widget/support-center/filter/main", ["jquery", "shared/widget/filter/base", "troopjs-utils/deferred", "troopjs-utils/when", "template!./main.html", "shared/widget/filter/query", "shared/helper/utils"], function (a, b, c, d, e, f) {
	function g() {
		f.addAttr({
			title : function (a) {
				var b = a.find("input").val().trim();
				b.length && this.addQuery("title", "title=" + window.encodeURIComponent(b))
			},
			type : function (a) {
				var b = a.find("select").val().trim();
				b.length && this.addQuery("type", "type=" + window.encodeURIComponent(b))
			},
			status : function (a) {
				var b = a.find("select").val().trim();
				b.length && this.addQuery("status", "status=" + window.encodeURIComponent(b))
			},
			date : function (a) {
				var b = a.find("input").val().trim();
				b.length && this.addQuery("date", "date=" + window.encodeURIComponent(b))
			}
		})
	}
	function h(a) {
		var b = this;
		c(function (a) {
			b.html(e, b._json, a)
		}).done(function () {
			i.call(b, a)
		})
	}
	function i(a) {
		var b = this;
		b.publish("make/route", {
			filter : "",
			page : 1
		}),
		a.resolve()
	}
	function j(a) {
		var b,
		c = this,
		d = a[0],
		e = a[1];
		switch (d) {
		case "type":
		case "status":
			b = c.$element.find('[name="' + d + '"]').find('[value="' + window.decodeURIComponent(e) + '"]').text(),
			c.$element.find('[data-query="' + d + '"]').removeClass("hide").find("span").text(b),
			f.addQuery(d, d + "=" + e);
			break;
		default:
			c.$element.find('[data-query="' + d + '"]').removeClass("hide").find("span").text(window.decodeURIComponent(e)),
			f.addQuery(d, d + "=" + e)
		}
	}
	return b.extend(function () {
		var a = this;
		a._setFilter = j,
		g.call(a)
	}, {
		"sig/initialize" : function (a, b) {
			h.call(this, b)
		},
		"dom/action.change" : a.noop
	})
}), define("troopjs-requirejs/template!shared/widget/support-center/item/main.html", [], function () {
	return function (a) {
		var b = "<td></td>\n<td>" + this.showType(a.type) + '</td>\n<td><a href="/support-center#detail!id=' + a._id + '">' + a.title + "</a></td>\n<td>" + this.formatDate(a.date) + "</td>\n<td>" + this.showStatus(a.status) + "</td>";
		return b
	}
}), define("shared/widget/support-center/item/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "shared/helper/utils", "template!./main.html"], function (a, b, c, d, e) {
	function f(a) {
		var b = this;
		b.html(e, b._json, a)
	}
	function g(a) {
		a.resolve()
	}
	var h = {
		support : "系统支持",
		bug : "系统缺陷",
		sugguestion : "建议与意见",
		consulting : "咨询服务"
	},
	i = {
		pending : "等待处理",
		processing : "处理中",
		done : "已处理"
	};
	return b.extend(function (a, b, c) {
		var d = this;
		d._json = c
	}, {
		"sig/initialize" : function (a, b) {
			f.call(this, b)
		},
		"sig/start" : function (a, b) {
			g.call(this, b)
		},
		showType : function (a) {
			return h[a]
		},
		showStatus : function (a) {
			return a ? i[a] : i.pending
		}
	})
}), define("troopjs-requirejs/template!shared/widget/support-center/list/main.html", [], function () {
	return function () {
		var a = '<div class="well well-small action-bar clearfix">\n    \n    <div class="pull-right">\n        <span>显示: </span>\n        <select class="sort input-small" data-weave="shared/widget/list-paginate/main(' + this._listType + ')" data-action="paginate">\n            <option value="10">10</option>\n            <option value="25">25</option>\n            <option value="50">50</option>\n        </select>\n        <select class="sort input-medium" data-weave="shared/widget/list-ordering/main(' + this._listType + ')" data-action="ordering">\n            <option value="-date">按添加时间倒序</option>\n            <option value="date">按添加时间顺序</option>\n            <option value="-status">按状态倒序</option>\n            <option value="status">按状态顺序</option>\n            <option value="-type">按反馈类型倒序</option>\n            <option value="type">按反馈类型顺序</option>\n            <option value="title">按主题排序</option>\n        </select>\n    </div>\n</div>\n\n<!-- pagination -->\n<div class="pagination clearfix hide" data-weave="shared/widget/pagination/main(\'' + this._listType + '\')"></div>\n\n<div class="loading-area widget-spin">\n    <table class="table table_vam table-bl">\n        <colgroup>\n            <col width="30">\n            <col>\n            <col>\n            <col>\n            <col>\n        </colgroup>\n        <thead>\n            <tr>\n                <th></th>\n                <th data-weave="shared/helper/translation" data-i18n="Feedback Type"></th>\n                <th data-weave="shared/helper/translation" data-i18n="Subject"></th>\n                <th data-weave="shared/helper/translation" data-i18n="Added Date"></th>\n                <th data-weave="shared/helper/translation" data-i18n="Status"></th>\n            </tr>\n        </thead>\n        <tbody class="list-container">\n        </tbody>\n    </table>\n</div>\n\n<!-- pagination -->\n<div class="pagination clearfix hide" data-weave="shared/widget/pagination/main(\'' + this._listType + "')\"></div>";
		return a
	}
}), define("shared/widget/support-center/list/main", ["jquery", "shared/widget/list/base", "troopjs-utils/deferred", "template!./main.html"], function (a, b, c, d) {
	function e(a) {
		var b = this;
		c(function (a) {
			b.html(d, a)
		}).done(function () {
			b.$container = b.$element.find(".list-container"),
			a.resolve()
		})
	}
	var f = {
		LIST : "/rest/user/issue_list?"
	};
	return b.extend(function () {
		this._url = f.LIST,
		this._listType = "support-center"
	}, {
		"sig/initialize" : function (a, b) {
			e.call(this, b)
		},
		appendItems : function (b) {
			var c = this;
			b.forEach(function (b) {
				var d = a("<tr></tr>");
				b.client_new && d.addClass("new"),
				c.$container.append(d),
				c.$container.children().last().data("json", b).attr("data-weave", "shared/widget/support-center/item/main(json)").weave()
			})
		}
	})
}), define("troopjs-requirejs/template!shared/widget/system/password/main.html", [], function () {
	return function () {
		var a = '<h3 class="heading" data-weave="shared/helper/translation" data-i18n="Modify Password"></h3>\r\n<form action="#" class="form-horizontal">\r\n    <div class="control-group">\r\n        <label for="originpass" class="control-label" data-weave="shared/helper/translation" data-i18n="Current Password"></label>\r\n        <div class="controls">\r\n            <input type="password" name="originpass" />\r\n        </div>\r\n    </div>\r\n    <div class="control-group">\r\n        <label for="newpass" class="control-label" data-weave="shared/helper/translation" data-i18n="New Password"></label>\r\n        <div class="controls">\r\n            <input type="password" name="newpass" />\r\n        </div>\r\n    </div>\r\n    <div class="control-group">\r\n        <label for="confirmpass" class="control-label" data-weave="shared/helper/translation" data-i18n="Confirm New Password"></label>\r\n        <div class="controls">\r\n            <input type="password" name="confirmpass" />\r\n        </div>\r\n    </div>\r\n    <div class="control-group formSep">\r\n        <div class="controls">\r\n            <button class="btn btn-primary" data-action="save" data-weave="shared/helper/translation" data-i18n="Save"></button>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n<!--\r\n<div>\r\n    <h3 class="heading">动态身份验证</h3>\r\n    <p>该功能已关闭，建议开启以更好保护账户数据安全</p>\r\n    <p>\r\n        <button class="btn btn-primary" data-action="open/authenticator">开启</button>\r\n    </p>\r\n\r\n    <ol>\r\n        <li>\r\n            什么是动态身份验证<br/>\r\n            动态身份验证之：将您的移动设备与谷露招聘系统的帐号绑定。每次登陆，不仅需要输入登录密码，还需要输入移动设备为您生成的一次性动态验证码。这样，即使登录密码泄露，攻击者由于没有您的移动设备，仍然无法登录系统，保证您的数据安全。</li>\r\n        <li>\r\n            工作原理<br>\r\n            谷露招聘管理系统借助Google身份验证器，在您的移动设备生成动态验证码。Google身份验证器是一个开源的移动设备应用程序，安装并与您的账号绑定后，它便可根据时间（无需手机流量、完全免费）为您的账号生成一次性动态验证码。\r\n        </li>\r\n        <li>\r\n            如何安装Google身份验证器<br>\r\n            <ul>\r\n                <li>\r\n                    Android移动设备：<a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLmF1dGhlbnRpY2F0b3IyIl0.">点击这里</a>\r\n                </li>\r\n                <li>\r\n                    iOS移动设备：<a href="http://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8">点击这里</a>\r\n                </li>\r\n                <li>\r\n                    Windows Phone：<a href="http://www.windowsphone.com/en-US/apps/021dd79f-0598-e011-986b-78e7d1fa76f8">点击这里</a>\r\n                </li>\r\n                <li>\r\n                    Symbian或者其它支持Java ME的设备：<a href="http://code.google.com/p/lwuitgauthj2me/">点击这里</a>\r\n                </li>\r\n                <li>\r\n                    WebOS：<a href="http://gregstoll.dyndns.org/gauth/">点击这里</a>\r\n                </li>\r\n            </ul>\r\n        </li>\r\n    </ol>\r\n</div>\r\n-->';
		return a
	}
}), define("shared/widget/system/password/main", ["jquery", "shared/widget/base/main", "troopjs-utils/deferred", "template!./main.html", "shared/helper/utils", "shared/helper/validate"], function (a, b, c, d, e, f) {
	function g(a) {
		var b = this;
		c(function (a) {
			b.html(d, b._json, a)
		}).then(function () {
			a.resolve()
		})
	}
	function h(a) {
		var b = this,
		c = b.$element.find("form");
		f(c, {
			rules : {
				originpass : {
					required : !0
				},
				newpass : {
					required : !0
				},
				confirmpass : {
					required : !0
				}
			}
		}),
		a.resolve()
	}
	var i = "/rest/user/changepassword";
	return b.extend({
		"sig/initialize" : function (a, b) {
			g.call(this, b)
		},
		"sig/start" : function (a, b) {
			h.call(this, b)
		},
		"hub:memory/context" : function (a, b) {
			this._user = b.user
		},
		"dom/action.click" : a.noop,
		"dom/action/save.click" : function (b, d) {
			d.preventDefault();
			var f = this,
			g = a(d.target),
			h = a(d.target).parents("form"),
			j = h.find("[name=originpass]").val(),
			k = h.find("[name=newpass]").val(),
			l = h.find("[name=confirmpass]").val(),
			m = this._user,
			n = {};
			return h.valid() ? k != l ? (e.alert("error", "Your confirm password doesn't match your new password"), void 0) : (n.email = m.email, n.origin = j, n.new = k, f.publish("ajax", {
					url : i,
					data : {
						data : JSON.stringify(n)
					},
					type : "post"
				}, c().done(function (a) {
						a.status ? e.alert("success", "Change password success!") : e.alert("error", a.message)
					}), g), void 0) : !1
		},
		"dom/action/open/authenticator.click" : function (a, b) {
			b.preventDefault();
			var c = this;
			c.publish("modal/authenticator/show")
		}
	})
}), define("troopjs-requirejs/template!shared/widget/system/preference/main.html", [], function () {
	return function () {
		var a = '<h3 class="heading" data-weave="shared/helper/translation" data-i18n="Preference"></h3>\n<form action="#" class="form-horizontal">\n    <fieldset>\n        <div class="control-group">\n            <label class="control-label" data-weave="shared/helper/translation" data-i18n="System Language"></label>\n            <div class="controls">\n                <label class="radio inline">\n                    <input type="radio" value="zh_CN" name="language"> 简体中文\n                </label>\n                <label class="radio inline">\n                    <input type="radio" value="en" name="language"> English\n                </label>\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label"></label>\n            <div class="controls">\n                <button class="btn" data-action="save" data-weave="shared/helper/translation" data-i18n="Save"></button>         \n            </div>\n        </div>\n    </fieldset>\n</form>';
		return a
	}
}), define("shared/widget/system/preference/main", ["compose", "jquery", "shared/widget/filter/base", "troopjs-utils/deferred", "troopjs-utils/when", "template!./main.html", "shared/helper/utils", "shared/helper/validate", "config"], function (a, b, c, d, e, f, g, h, i) {
	function j(a) {
		var b = this;
		d(function (a) {
			b.html(f, b._json, a)
		}).done(function () {
			k.call(b, a)
		})
	}
	function k(a) {
		var b = this;
		b.$form = b.$element.find("form"),
		b.$peopleTag = b.$element.find('[name="people-tag"]'),
		b.$jobTag = b.$element.find('[name="job-tag"]'),
		h(b.$form, {
			rules : {
				language : {
					required : !0
				},
				"people-tag" : {
					required : !0
				},
				"job-tag" : {
					required : !0
				}
			}
		}),
		a.resolve()
	}
	function l() {
		var a = this,
		b = a.user.lang;
		b && a.$element.find('[value="' + b + '"]').prop("checked", !0)
	}
	var m = {
		USER_ADD : "/rest/user/changelanguage"
	};
	return c.extend({
		config : i,
		"sig/initialize" : function (a, b) {
			j.call(this, b)
		},
		"hub:memory/context" : function (a, b) {
			var c = this;
			c.user = b.user,
			l.call(c)
		},
		"dom/action.click" : b.noop,
		"dom/action/save" : function (a, c) {
			c.preventDefault();
			var e = this,
			f = b(c.target);
			e.$form.valid() && (e.user.lang = e.$element.find('[name="language"]:checked').val(), f.attr("disabled", !0), e.publish("ajax", {
					url : m.USER_ADD,
					data : {
						data : JSON.stringify(e.user)
					},
					type : "post"
				}, d().done(function (a) {
						a.status || g.alert("error", a.message),
						window.location.reload()
					})))
		}
	})
});
